/*!
 * EasyData.JS UI
 * Copyright 2023 Korzh.com
 * Licensed under MIT
 !*/
"use strict";var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};function e(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}var n,o,i,r=function(){return r=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)};function a(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))}"function"==typeof SuppressedError&&SuppressedError,function(t){t[t.Unknown=0]="Unknown",t[t.String=1]="String",t[t.Byte=2]="Byte",t[t.Word=3]="Word",t[t.Int32=4]="Int32",t[t.Int64=5]="Int64",t[t.Bool=6]="Bool",t[t.Float=7]="Float",t[t.Currency=8]="Currency",t[t.BCD=9]="BCD",t[t.Date=10]="Date",t[t.Time=11]="Time",t[t.DateTime=12]="DateTime",t[t.Autoinc=13]="Autoinc",t[t.Memo=14]="Memo",t[t.Blob=15]="Blob",t[t.FixedChar=16]="FixedChar",t[t.Guid=17]="Guid",t[t.Geometry=18]="Geometry",t[t.Geography=19]="Geography"}(n||(n={})),function(t){t[t.Data=0]="Data",t[t.Virtual=1]="Virtual",t[t.Lookup=2]="Lookup"}(o||(o={})),function(t){t.Trace="TRACE",t.Options="OPTIONS",t.Get="GET",t.Put="PUT",t.Post="POST",t.Delete="DELETE"}(i||(i={}));var s,l,c=function(){function t(t,e){this.xhr=t,this.method=e.method,this.url=e.url,this.headers=e.headers,this.queryParams=e.queryParams,this.data=e.data}return t.prototype.setHeader=function(t,e){this.headers[t]=e},t.prototype.setQueryParam=function(t,e){this.queryParams[t]=e},t.prototype.getXMLHttpRequest=function(){return this.xhr},t.prototype.getResponseHeaders=function(){if(this.xhr.readyState==this.xhr.HEADERS_RECEIVED){for(var t={},e=0,n=this.xhr.getAllResponseHeaders().trim().split(/[\r\n]+/);e<n.length;e++){var o=n[e].split(": "),i=o.shift(),r=o.join(": ");t[i]=r}return t}return{}},t.prototype.open=function(){var t=this;if(this.xhr.readyState===this.xhr.UNSENT){var e=this.url;for(var n in this.queryParams&&Object.keys(this.queryParams).length>0&&(e+=encodeURI("?"+Object.keys(this.queryParams).map((function(e){return e+"="+t.queryParams[e]})).join("&"))),this.xhr.open(this.method,e,!0),this.xhr.setRequestHeader("X-Requested-With","XMLHttpRequest"),this.headers)this.xhr.setRequestHeader(n,this.headers[n])}},t.prototype.abort=function(){this.xhr.abort()},t}();!function(t){var e,o={shortDateFormat:"MM/dd/yyyy",longDateFormat:"dd MMM, yyyy",editDateFormat:"MM/dd/yyyy",shortTimeFormat:"HH:mm",editTimeFormat:"HH:mm",longTimeFormat:"HH:mm:ss",shortMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longMonthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],shortWeekDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longWeekDayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],decimalSeparator:".",currency:"USD"},i={localeId:"en-US",englishName:"English",displayName:"English",texts:{ButtonOK:"OK",ButtonCancel:"Cancel",Yes:"Yes",No:"No",True:"True",False:"False"},settings:o},r={"en-US":i},a=[];function s(t){for(var e=0,n=a;e<n.length;e++){(0,n[e])(t)}}function c(){return e.localeId}function u(t){var n=r[t];n?l.assignDeep(e,n):(e.englishName=t,e.displayName=t,e.texts=l.assignDeep({},i.texts)),e.localeId=t}function d(){return e.settings}function h(t){e.settings||(e.settings=l.assignDeep({},o)),e.settings=l.assignDeep(e.settings,t)}function p(t,n){s(n);var o=e;t&&(n.localeId||(n.localeId=t),(o=r[t])||(o=l.assignDeep({},i),r[t]=o)),l.assignDeep(o,n)}function f(){var t,n,o,i,r,a,s="object"==typeof navigator?navigator.language:void 0;t=s,n=new Date(2020,5,7,19,34,56,88),o=n.toLocaleDateString(t,{year:"numeric",month:"numeric",day:"numeric"}),i=n.toLocaleTimeString(t,{hour:"numeric",minute:"numeric",second:"numeric"}),r=o.replace("07","dd").replace("7","d").replace("06","MM").replace("6","M").replace("2020","yyyy").replace("20","yy"),a=i.replace("19","HH").replace("07","hh").replace("7","h").replace("34","mm").replace("56","ss").replace("PM","tt"),e.settings||(e.settings={}),h({shortDateFormat:r,shortTimeFormat:a})}function g(t){var e,o=d();switch(t){case n.Date:e=o.shortDateFormat;break;case n.Time:e=o.shortTimeFormat;break;default:e=o.shortDateFormat+" "+o.shortTimeFormat}return e}function m(t){var e,o=d();switch(t){case n.Date:e=o.longDateFormat;break;case n.Time:e=o.longTimeFormat;break;default:e=o.longDateFormat+" "+o.longTimeFormat}return e}t.addMapper=function(t){a.push(t)},t.getLocales=function(){var t=[];for(var e in r)t.push({locale:e,englishName:r[e].englishName,displayName:r[e].displayName});return t.sort((function(t,e){return t.englishName>e.englishName?1:t.englishName===e.englishName?0:-1}))},t.getCurrentLocale=c,t.setLocale=function(t){console.warn("This method is deprecated. Use setCurrentLocale instead"),u(t)},t.setCurrentLocale=u,t.getText=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var o=e.texts,i="";if(t&&t.length)for(var r=t.length,a=0;a<r&&"object"==typeof(i=o[t[a]]);a++)o=i;return i},t.getLocaleSettings=d,t.getOneLocaleSetting=function(t){return e.settings[t]},t.getShortMonthName=function(t){var e=d();if(t>0&&t<13)return e.shortMonthNames[t-1];throw"Wrong month number: "+t},t.getLongMonthName=function(t){var e=d();if(t>0&&t<13)return e.longMonthNames[t-1];throw"Wrong month number: "+t},t.getShortWeekDayName=function(t){var e=d();if(t>0&&t<8)return e.shortWeekDayNames.length>=t?e.shortWeekDayNames[t-1]:t.toString();throw"Wrong month number: "+t},t.getLongWeekDayName=function(t){var e=d();if(t>0&&t<8)return e.longWeekDayNames.length>=t?e.longWeekDayNames[t-1]:t.toString();throw"Wrong month number: "+t},t.updateLocaleSettings=h,t.updateLocaleTexts=function(t){"object"==typeof t?(s({localeId:e.localeId,texts:t}),l.assignDeep(e.texts,t)):console.error("Wrong parameter type in updateLocaleTexts function call.The first parameter (localeId) is not necessary. Use updateLocaleTexts(texts) instead")},t.updateDefaultTexts=function(t){for(var n in r){var o=r[n];o.texts=l.assignDeep({},t,o.texts)}e.texts=l.assignDeep({},t,e.texts)},t.updateLocaleInfo=p,t.addLocale=function(t,e){p(t,e)},t.resetLocales=function(){e||(e=l.assignDeep({},i),f())},t.dateTimeToStr=function(t,e,o){return o?"d"==o?o=g(n.Date):"D"==o?o=m(n.Date):"f"==o?o=g(n.DateTime):"F"==o&&(o=m(n.DateTime)):o=g(e),l.dateTimeToStr(t,o)},t.numberToStr=function(e,n){if(n&&n.length>0){var o=n.charAt(0).toUpperCase();if("S"===o)return function(e,n){if(!y[n]){var o=n.split("|").filter((function(t){return t.length>0})).map((function(t){return t.split("=")}));if(y[n]={},o.length>0)if(o[0].length>1)for(var i=0,r=o;i<r.length;i++){var a=r[i];y[n][Number.parseInt(a[1])]=a[0]}else o.forEach((function(t,e){y[n][e]=t[0]}))}var s=y[n];if(void 0!==s[e]){a=s[e];return t.getText(a)||a}return e.toString()}(e,n.slice(1));if(["D","F","C"].indexOf(o)>=0){var i=c();return e.toLocaleString(i,function(t){var e=d(),n=t[0].toUpperCase(),o=t.length>1?Number.parseInt(t.slice(1)):"D"==n?1:2;switch(n){case"D":return{style:"decimal",useGrouping:!1,minimumIntegerDigits:o};case"C":return{style:"currency",currency:e.currency,minimumFractionDigits:o};default:return{style:"decimal",minimumFractionDigits:o,maximumFractionDigits:o}}}(n))}return function(t,e){for(var n=t.toString(),o="",i=n.length-1,r=e.length-1;r>=0;r--){var a=e.charAt(r);"#"===a||"0"===a?i>=0?(o+=n.charAt(i),i--):"0"===a&&(o+=0):o+=a}return o.split("").reverse().join("")}(Math.trunc(e),n)}var r=d();return l.numberToStr(e,r.decimalSeparator)},t.booleanToStr=function(e,n){if(n&&n.length>0&&"S"===n.charAt(0).toUpperCase()){var o=n.slice(1).split("|");if(o.length>1){var i=o[e?1:0];return t.getText(i)||i}}return"".concat(e)};var y={}}(s||(s={})),function(t){t.getAllDataTypes=function(){return Object.values(n).filter((function(t){return"number"==typeof t}))},t.getDateDataTypes=function(){return[n.Time,n.Date,n.DateTime]},t.getStringDataTypes=function(){return[n.String,n.Memo,n.FixedChar]};var e=[n.Byte,n.Word,n.Int32,n.Int64,n.Float,n.Currency,n.Autoinc];t.getNumericDataTypes=function(){return e};var o=[n.Byte,n.Word,n.Int32,n.Int64,n.Autoinc];function i(t,e,n){e||(e={});for(var o=0,a=n;o<a.length;o++){var s=a[o];if(s)for(var l in s)if(s.hasOwnProperty(l)){var c=s[l];null!==c&&"object"==typeof c?t.has(c)?e[l]=t.get(c):Array.isArray(c)?(e[l]=r(c),t.set(c,e[l])):(void 0!==e[l]&&null!=e[l]||(e[l]=Object.create(Object.getPrototypeOf(c))),t.set(c,e[l]),i(t,e[l],[c])):e[l]=c}}return e}function r(t){for(var e=[],n=0,o=t;n<o.length;n++){var i=o[n];e.push(i)}return e}t.assign=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var o=0;o<e.length;o++){var i=e[o];if(i)for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])}return t},t.assignDeep=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return i(new WeakMap,t,e)},t.getIfDefined=function(t,e){return void 0!==t?t:e},t.IsDefinedAndNotNull=function(t){return null!=t},t.copyArrayTo=function(t,e){for(var n=t.length,o=e.length,i=0;i<n&&i<o;i++)e[i]=t[i]},t.createArrayFrom=r,t.findItemById=function(t,e){for(var n=t.length,o=0;o<n;o++)if(t[o].id===e)return t[o];return null},t.findItemIndexById=function(t,e){for(var n=t.length,o=0;o<n;o++)if(t[o].id===e)return o;return-1},t.indexOfArrayItem=function(t,e){if(t.indexOf)return t.indexOf(e);for(var n=t.length,o=0;o<n;o++)if(e==t[o])return o;return-1},t.moveArrayItem=function(t,e,n){if(e>=t.length)throw"Index out of bounds: "+e;n>=t.length&&(n=t.length-1);var o=t.splice(e,1)[0];t.splice(n,0,o)},t.removeArrayItem=function(t,e){var n=t.indexOf(e);if(-1!=n)return t.splice(n,1)[0]},t.insertArrayItem=function(t,e,n){t.splice(e,0,n)},t.fillArray=function(t,e,n,o){void 0===n&&(n=0);for(var i=t.length>>>0,r=n>>0,a=r<0?Math.max(i+r,0):Math.min(r,i),s=void 0===o?i:o>>0,l=s<0?Math.max(i+s,0):Math.min(s,i);a<l;)t[a]=e,a++;return t},t.shiftToFitWindow=function(t,e){var n=document.getElementsByTagName("body")[0],o=window.innerWidth||document.documentElement.clientWidth||n.clientWidth,i=t+e,r=0;return i>o&&t+(r=o-i-10)<0&&(r=10-t),r},t.isObject=function(t){return null!==t&&("function"==typeof t||"object"==typeof t)},t.isNumericType=function(t){return e.indexOf(t)>=0},t.isIntType=function(t){return o.indexOf(t)>=0},t.isNumeric=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},t.areCompatibleDataTypes=function(t,e){return void 0===t||void 0===e||t==n.Unknown||e==n.Unknown||t==e||t==n.Date&&e==n.DateTime||t==n.DateTime&&e==n.Date},t.isPropSet=function(t,e){return t[e]||t[e.toLowerCase()]||t[e.toUpperCase()]};var a="0123456789abcdefghijklmnopqrstuvwxyz";function l(t,e){var n=t.length;if(n>e){var o=n/e,i="";i+=t[0];for(var r=o,a=void 0,s=1;s<n;s++)a=t[s],s+1>r&&(i+=a,r+=o);return i}return t}function c(t,e){return Math.floor(Math.random()*(e-t))+t}function u(t){var e=parseInt(t);if(isNaN(e))throw'"'.concat(t,'" is not a valid number');return e}t.generateId=function(t){t||(t="easy");var e=t.length>4?function(t,e){var n=t.split("-"),o=1,i=e;n.length<e&&(o=e/n.length,i=n.length);for(var r="",a=0;a<i;a++)r+=l(n[a],o);return r}(t,4):t;e&&e.length>0&&(e+="-");var n=a[c(0,a.length)]+a[c(0,a.length)]+a[c(0,a.length)],o=c(0,1e4);return e+n+function(t,e){void 0===e&&(e=36);var n="",o=t;do{n=a[o%e]+n,o=Math.floor(o/=e)}while(o>0);return n}(621355968e9+1e4*(new Date).getTime()-0x8d60e562e627800-o)},t.strToDateTime=function(t,e){if(!t||0==t.length)return new Date;var n=t.replace(/[^a-zA-Z0-9_]/g,"-"),o=e.replace(/[^a-zA-Z0-9_]/g,"-").split("-"),i=n.split("-"),r=o.indexOf("MM"),a=o.indexOf("dd"),s=o.indexOf("yyyy"),l=o.indexOf("HH"),c=o.indexOf("mm"),d=o.indexOf("ss"),h=new Date;try{var p=s>-1&&s<i.length?u(i[s]):h.getFullYear(),f=r>-1&&r<i.length?u(i[r])-1:h.getMonth()-1;if(f>11)throw"";var g=a>-1&&a<i.length?u(i[a]):h.getDate();if(g>function(t,e){return new Date(e,t+1,0).getDate()}(f,p))throw"";var m=l>-1&&l<i.length?u(i[l]):0;if(m>23)throw"";var y=c>-1&&c<i.length?u(i[c]):0;if(y>59)throw"";var v=d>-1&&d<i.length?u(i[d]):0;if(v>59)throw"";return new Date(p,f,g,m,y,v)}catch(e){throw"".concat(t," is not a valid date.")}},t.strToTime=function(t){var e=t.split(":");try{var n=e.length>0?u(e[0]):0;if(n>23)throw"";var o=e.length>1?u(e[1]):0;if(o>59)throw"";var i=e.length>1?u(e[1]):0;if(i>59)throw"";return new Date(0,0,0,n,o,i)}catch(e){throw"".concat(t," is not a valid time.")}};var d=/\[([^\]]+)]|y{2,4}|M{1,4}|d{1,2}|H{1,2}|h{1,2}|m{2}|s{2}|t{2}/g;t.dateTimeToStr=function(t,e){var n=t.getFullYear().toString(),o=t.getMonth()+1,i=t.getDate(),r=t.getHours(),a=t.getMinutes(),l=t.getSeconds(),c=r%12||12,u=r>11,h={yyyy:n,yy:n.substring(n.length-2),MMMM:s.getLongMonthName(o),MMM:s.getShortMonthName(o),MM:o<10?"0"+o:o.toString(),M:o.toString(),dd:i<10?"0"+i:i.toString(),d:i.toString(),HH:r<10?"0"+r:r.toString(),H:r.toString(),hh:c<10?"0"+c:c.toString(),h:c.toString(),tt:u?"PM":"AM",mm:a<10?"0"+a:a.toString(),ss:l<10?"0"+l:l.toString()};return e.replace(d,(function(t,e){return e||h[t]}))},t.numberToStr=function(t,e){return e=e||s.getLocaleSettings().decimalSeparator,t.toString().replace(".",e)}}(l||(l={}));var u=function(){function t(t,e){this.request=t,this.promise=e}return t.prototype.getPromise=function(){return this.promise},t.prototype.getRequest=function(){return this.request},t.prototype.then=function(t,e){return this.promise.then(t,e)},t.prototype.catch=function(t){return this.promise.catch(t)},t.prototype.finally=function(t){return this.promise.finally(t)},t}(),d=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),h=function(){return h=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},h.apply(this,arguments)},p=function(t){function e(e,n){var o=t.call(this,n)||this;return o.status=e,o}return d(e,t),e}(Error);!function(){function t(){this.defaultHeaders={},this.customPayload=void 0}Object.defineProperty(t.prototype,"responseBody",{get:function(){return this._responseBody},enumerable:!1,configurable:!0}),t.prototype.get=function(t,e){return this.send(i.Get,t,null,e)},t.prototype.post=function(t,e,n){return this.send(i.Post,t,e,n)},t.prototype.put=function(t,e,n){return this.send(i.Put,t,e,n)},t.prototype.delete=function(t,e,n){return this.send(i.Delete,t,e,n)},t.prototype.send=function(e,n,o,i){var r=this,a=(i=i||{}).dataType||"json",s=i.contentType||"form-data"!==a?"application/json":null;o&&"form-data"!=a&&this.customPayload&&(o.data=l.assignDeep(o.data||{},this.customPayload));var d=new("onload"in new XMLHttpRequest?XMLHttpRequest:window.XDomainRequest),f={method:e,url:n,headers:h(h({},this.defaultHeaders),i.headers||{}),queryParams:i.queryParams||{},data:o};s&&(f.headers["Content-Type"]=s);var g=new c(d,f);this.beforeEachRequest&&(console.warn("HttpClient: 'beforeEachRequest' is deprecated and will be removed in future updates.\n            Use 'onRequest' instead"),this.beforeEachRequest(g)),this.onRequest&&this.onRequest(g);var m=g.data&&"string"!=typeof g.data&&"json"==a?JSON.stringify(g.data):g.data;return g.open(),new u(g,new Promise((function(e,o){i.responseType&&(d.responseType=i.responseType),d.onerror=function(t){o(new p(d.status,d.responseText))},d.onreadystatechange=function(){if(4==d.readyState){var i=d.getResponseHeader("Content-Type")||"",a=d.status;if(0===a)o(new p(a,"Network error or the request was aborted"));else if(a>=200&&a<400){var s="arraybuffer"===d.responseType||"blob"===d.responseType?d.response:0==i.indexOf("application/json")?JSON.parse(d.responseText):d.responseText;r._responseBody=s,r.onResponse&&r.onResponse(d),e(s)}else{("arraybuffer"===d.responseType||"blob"===d.responseType?t.decodeArrayBuffer(d.response):Promise.resolve(d.responseText)).then((function(t){var e=0==i.indexOf("application/json")?JSON.parse(t):t;r._responseBody=e;var s=e.message||(404==a?"No such endpoint: ".concat(n):e);o(new p(a,s))}))}}},d.send(m)})))},t.decodeArrayBuffer=function(t){var e=new FileReader;return new Promise((function(n){e.onloadend=function(){e.readyState==FileReader.DONE&&n(e.result)},e.readAsText(new Blob([t]))}))}}();var f,g=function(){return g=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},g.apply(this,arguments)};!function(){function t(t){this.colStore=t,this.aggregates=[],this.groups=[],this.useGrandTotals=!1,this.useRecordCount=!1,this._caseSensitiveGroups=!1,this.COUNT_FIELD_NAME="GRPRECCNT"}Object.defineProperty(t.prototype,"caseSensitiveGroups",{get:function(){return this._caseSensitiveGroups},set:function(t){this._caseSensitiveGroups=t,this.updateCompareProc()},enumerable:!1,configurable:!0}),t.prototype.updateCompareProc=function(){this.compareValues=this._caseSensitiveGroups?this.strictCompare:this.caseInsensitiveCompare},t.prototype.addGroup=function(t){var e=t.columns||this.colStore.getColumnIds(t.from,t.to);if(!this.colStore.validateColumns(e))throw"Invalid columns: "+e;if(this.hasColumnsInUse(e))throw"Can't add same columns to different groups/aggregates";return this.groups.push(g({columns:e},t)),this},t.prototype.addAggregateColumn=function(t,e){var n="string"==typeof t?t:this.colStore.getColumnIds(t,t)[0];if(this.hasColumnsInUse([n])||!this.colStore.validateAggregate(n,e))throw"Invalid aggregation function for the column: "+n;return this.aggregates.push({colId:n,funcId:e}),this},t.prototype.addGrandTotals=function(){return this.useGrandTotals=!0,this},t.prototype.addCounts=function(){return this.useRecordCount=!0,this},t.prototype.getGroups=function(){var t=this,e=[];return this.groups.map((function(n){return e=e.concat(n.columns),g(g({},n),{columns:Array.from(e),aggregates:Array.from(t.aggregates)})}))},t.prototype.getInternalGroups=function(){return this.groups},t.prototype.lastGroup=function(){var t=this.getGroups();return t[t.length-1]},t.prototype.getAggregates=function(){return this.aggregates},t.prototype.hasAggregates=function(){return this.aggregates.length>0},t.prototype.hasGroups=function(){return this.groups.length>0},t.prototype.hasGrandTotals=function(){return this.useGrandTotals},t.prototype.hasRecordCount=function(){return this.useRecordCount},t.prototype.isEmpty=function(){return!(this.hasAggregates()||this.hasGroups()||this.hasAggregates()||this.hasRecordCount())},t.prototype.drop=function(){console.warn('"drop()" method is obsolete. Use "clear()" instead'),this.clear()},t.prototype.clear=function(){return this.groups=[],this.aggregates=[],this.useGrandTotals=!1,this.useRecordCount=!1,this.caseSensitiveGroups=!1,this},t.prototype.hasColumnsInUse=function(t){for(var e=0,n=this.groups;e<n.length;e++){if(n[e].columns.filter((function(e){return t.indexOf(e)>=0})).length>0)return!0}for(var o=0,i=this.aggregates;o<i.length;o++){var r=i[o];if(t.indexOf(r.colId)>=0)return!0}return!1},t.prototype.needAggrCalculation=function(){return(this.hasAggregates()||this.hasRecordCount())&&(this.hasGrandTotals()||this.hasGroups())},t.prototype.saveToData=function(){return{groups:Array.from(this.groups),ugt:this.useGrandTotals,urc:this.useRecordCount,csg:this.caseSensitiveGroups,aggregates:Array.from(this.aggregates)}},t.prototype.loadFromData=function(t){t&&(void 0!==t.ugt&&(this.useGrandTotals=t.ugt),void 0!==t.urc&&(this.useRecordCount=t.urc),void 0!==t.csg&&(this.caseSensitiveGroups=t.csg),t.groups&&(this.groups=Array.from(t.groups)),t.aggregates&&(this.aggregates=Array.from(t.aggregates)))},t.prototype.buildGroupKey=function(t,e){var n=!this.caseSensitiveGroups,o={};if(t)for(var i=0,r=t.columns;i<r.length;i++){var a=r[i],s=e.getValue(a);n&&"string"==typeof s&&(s=s.toLowerCase()),o[a]=s}return o},t.prototype.strictCompare=function(t,e){return t instanceof Date?t.getTime()===e.getTime():t===e},t.prototype.caseInsensitiveCompare=function(t,e){return t instanceof Date?t.getTime()===e.getTime():("string"==typeof t?t.toLowerCase():t)===("string"==typeof e?e.toLowerCase():e)}}(),function(t){t[t.None=0]="None",t[t.Left=1]="Left",t[t.Center=2]="Center",t[t.Right=3]="Right"}(f||(f={}));var m=function(t){if(!t)throw Error("Options are required");if(!t.id)throw Error("Field Id is required");if(!t.label)throw Error("Label is required");this.id=t.id,this.type=l.getIfDefined(t.type,n.String),this.label=t.label,this.originAttrId=t.originAttrId,this.isAggr=t.isAggr||!1,this.displayFormat=t.dfmt,this.groupFooterColumnTemplate=t.gfct,this.style=t.style||{},this.description=t.description,this.calculatedWidth=0},y=function(){function t(){this.items=[],this.mapper={},this._dateColumnIdx=[]}return Object.defineProperty(t.prototype,"count",{get:function(){return this.items.length},enumerable:!1,configurable:!0}),t.prototype.add=function(t){var e;e=t instanceof m?t:new m(t);var o=this.items.length;return this.items.push(e),this.mapper[e.id]=o,[n.Date,n.DateTime,n.Time].indexOf(e.type)>=0&&this._dateColumnIdx.push(o),o},t.prototype.updateDateColumnIdx=function(){this._dateColumnIdx=this.getItems().filter((function(t){return[n.Date,n.DateTime,n.Time].indexOf(t.type)>=0})).map((function(t,e){return e}))},t.prototype.put=function(t,e){t>=0&&t<this.count&&(this.items[t]=e,this.updateDateColumnIdx())},t.prototype.move=function(t,e){var n=this.items.indexOf(t);n>=0&&n!=e&&(l.moveArrayItem(this.items,n,e),this.updateDateColumnIdx())},t.prototype.get=function(t){return t>=0&&t<this.count?this.items[t]:null},t.prototype.getIndex=function(t){return this.mapper[t]},t.prototype.getItems=function(){return this.items},t.prototype.getDateColumnIndexes=function(){return this._dateColumnIdx},t.prototype.removeAt=function(t){var e=this.get(t);this.items.splice(t,1);var n=this._dateColumnIdx.indexOf(t);n>=0&&this._dateColumnIdx.splice(n,1),delete this.mapper[e.id]},t.prototype.clear=function(){this.items=[],this._dateColumnIdx=[],this.mapper={}},t}(),v=function(){function t(t,e){this.columns=t,this.values=e}return t.prototype.toArray=function(){return Array.from(this.values)},t.prototype.size=function(){return this.values.length},t.prototype.getValue=function(t){var e;if("string"==typeof t){if(void 0===(e=this.columns.getIndex(t)))throw new RangeError("No column with id '".concat(t,"'"))}else e=t;if(e>=this.values.length)throw new RangeError("Out of range: "+e);return this.values[e]},t.prototype.setValue=function(t,e){var n;if("string"==typeof t){if(void 0===(n=this.columns.getIndex(t)))throw new RangeError("No column with id '".concat(t,"'"))}else n=t;if(n>=this.values.length)throw new RangeError("Out of range: "+n);this.values[n]=e},t}();!function(){function t(t){if(this._chunkSize=1e3,this._elasticChunks=!1,this.cachedRows=[],this.total=0,this.loader=null,this.needTotal=!0,this.isInMemory=!1,t=t||{},this._chunkSize=t.chunkSize||this._chunkSize,this._elasticChunks=t.elasticChunks||this._elasticChunks,this.loader=t.loader,void 0!==t.inMemory&&(this.isInMemory=t.inMemory),this.isInMemory&&(this.needTotal=!1),this._columns=new y,this.onUpdate=t.onUpdate,t.columns)for(var e=0,n=t.columns;e<n.length;e++){var o=n[e];this._columns.add(o)}if(t.rows)for(var i=0,r=t.rows;i<r.length;i++){var a=r[i],s=this.createRow(a);this.addRow(s)}this.needTotal=!this._elasticChunks}Object.defineProperty(t.prototype,"columns",{get:function(){return this._columns},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"chunkSize",{get:function(){return this._chunkSize},set:function(t){this._chunkSize=t,this.total=0,this.needTotal=!this.elasticChunks,this.cachedRows=[]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"elasticChunks",{get:function(){return this._elasticChunks},set:function(t){this._elasticChunks=t,this.total=0,this.needTotal=!this.elasticChunks,this.cachedRows=[]},enumerable:!1,configurable:!0}),t.prototype.getRows=function(t){var e=this,n=0,o=this._chunkSize;t&&("page"in t?(n=t.pageSize*(t.page-1),o=t.pageSize):(n=t.offset,o=t.limit));var i=n+o;if(!this.needTotal&&!this.elasticChunks){if(n>=this.total)return Promise.resolve([]);i>this.total&&(i=this.total)}if(this.isInMemory&&i>this.cachedRows.length&&(i=this.cachedRows.length),i<=this.cachedRows.length)return Promise.resolve(this.cachedRows.slice(n,i));if(!this.loader)throw"Loader is not defined. Can't get the rows from ".concat(n," to ").concat(i);var r=this.needTotal;this.needTotal&&(this.needTotal=!1);var a=this.cachedRows.length,s=i-a;return s<this._chunkSize&&(s=this._chunkSize),this.loader.loadChunk({offset:a,limit:s,needTotal:r}).then((function(t){(r&&(e.total=t.total),Array.prototype.push.apply(e.cachedRows,t.table.getCachedRows()),i>e.cachedRows.length&&(i=e.cachedRows.length),e.elasticChunks)&&(t.table.getCachedCount()<s&&(e.total=e.cachedRows.length));return e.fireUpdated(),e.cachedRows.slice(n,i)}))},t.prototype.getRow=function(t){return this.getRows({offset:t,limit:1}).then((function(t){return t.length>0?t[0]:null}))},t.prototype.getTotal=function(){return this.total},t.prototype.setTotal=function(t){this.total=t,this.needTotal=!1},t.prototype.getCachedCount=function(){return this.cachedRows.length},t.prototype.clear=function(){this.columns.clear(),this.cachedRows=[],this.total=0,this.needTotal=!this._elasticChunks,this.fireUpdated()},t.prototype.createRow=function(t){var e=this,n=this._columns.getDateColumnIndexes(),o=new Array(this._columns.count),i=t instanceof v?function(e){return t.getValue(e)}:function(e){return t[e]};return t&&this.columns.getItems().forEach((function(t){var r=i(t.id),a=e.columns.getIndex(t.id);o[a]=n.indexOf(a)>=0?e.mapDate(r,t.type):r})),new v(this._columns,o)},t.prototype.mapDate=function(t,e){if(t){var o=new Date(t);return isNaN(o.getTime())&&e==n.Time&&(o=l.strToTime(t)),o}return null},t.prototype.addRow=function(t){var e;if(Array.isArray(t)){var n=t,o=this._columns.getDateColumnIndexes();if(o.length>0)for(var i=0,r=o;i<r.length;i++){var a=r[i];n[a]&&(n[a]=this.mapDate(n[a],this._columns.get(a).type))}e=new v(this._columns,n)}else e=this.createRow(t);this.cachedRows.push(e);var s=this.getCachedCount();return s>this.total&&(this.total=s),e},t.prototype.getCachedRows=function(){return this.cachedRows},t.prototype.totalIsKnown=function(){return this.elasticChunks?this.getCachedCount()===this.total:!this.needTotal},t.prototype.fireUpdated=function(){this.onUpdate&&this.onUpdate(this)}}();var D,C=function(){function t(){}return t.newGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}))},t}(),x=function(){function t(t){this.silentMode=0,this.events=new Array,this.source=t}return t.prototype.subscribe=function(t,e){var n=this.getEventRecByType(t),o={id:C.newGuid(),callback:e};return n?n.eventCallbacks.push(o):(n={type:t,eventCallbacks:new Array(o)},this.events.push(n)),o.id},t.prototype.unsubscribe=function(t,e){var n=this.getEventRecByType(t);if(n){var o=-1;for(o=0;o<n.eventCallbacks.length&&n.eventCallbacks[o].id!==e;o++);o>=0&&n.eventCallbacks.splice(o,1)}},t.prototype.fire=function(t,e,n,o){if(void 0===n&&(n=0),void 0===o&&(o=!1),!this.silentMode||o){var i=this.getEventRecByType(t);if(i){var r={type:t,source:this.source,data:e},a=function(){for(var t=0,e=i.eventCallbacks;t<e.length;t++){e[t].callback(r)}};n>0?setTimeout(a,n):a()}}},t.prototype.enterSilentMode=function(){this.silentMode++},t.prototype.exitSilentMode=function(){this.silentMode&&this.silentMode--},t.prototype.isSilent=function(){return this.silentMode>0},t.prototype.getEventRecByType=function(t){for(var e=0,n=this.events;e<n.length;e++){var o=n[e];if(o.type==t)return o}return null},t}();function w(t){t.style.display="none"}function T(t,e){e||(e=""),t.style.display=e}function E(){var t=document.body,e=document.documentElement;return{top:window.pageYOffset||e.scrollTop||t.scrollTop,left:window.pageXOffset||e.scrollLeft||t.scrollLeft}}function b(t){var e={x:0,y:0};if(null!==t){var n=function(t){var e,n={top:0,right:0,bottom:0,left:0,width:0,height:0};try{e=t.getBoundingClientRect()}catch(t){e=n}var o=document.body,i=document.documentElement,r=E(),a=r.top,s=r.left,l=i.clientTop||o.clientTop||0,c=i.clientLeft||o.clientLeft||0,u=e.top+a-l,d=e.left+s-c;return{top:Math.round(u),left:Math.round(d)}}(t);e={x:n.left,y:n.top}}return e}function S(){return{width:window.innerWidth,height:window.innerHeight}}!function(t){t.renderLiquidTemplate=function(t,e){var n=t;if(e)for(var o in e){var i=new RegExp("{{"+o+"}}","g");n=n.replace(i,e[o])}return n}}(D||(D={})),s.resetLocales(),"function"!=typeof Object.values&&(Object.values=function(t){return Object.keys(t).map((function(e){return t[e]}))}),"function"!=typeof Math.trunc&&(Math.trunc=function(t){return isNaN(t)?NaN:t>0?Math.floor(t):Math.ceil(t)}),exports.browserUtils=void 0,function(t){var e=null,n=null;function o(){
// return eval('/*@cc_on!@*/false || !!document.documentMode');
if(null===n){var t=navigator.userAgent;n=t.indexOf("MSIE ")>-1||t.indexOf("Trident/")>-1}return n}t.IsIE=o,t.IsEdge=function(){var t=window.navigator.userAgent;return!o()&&t.includes("Edge/")},t.IsFirefox=function(){if(null===e){var t=navigator.userAgent;e=t.toLowerCase().indexOf("firefox")>-1}return e};var i,r=!1,a=void 0,s=function(){var t=l();r=window.matchMedia("only screen and (max-width: 840px)").matches||window.matchMedia("only screen and (max-height: 420px)").matches;var e=l();e!==t&&i&&i(e)};function l(){return void 0!==a?a:r}s(),window.addEventListener("resize",(function(){return s()})),t.isMobileMode=l,t.setIsMobileMode=function(t){var e=l();a=t;var n=l();n!==e&&i&&i(n)},t.onMobileModeChanged=function(t){i=t},t.getMobileCssClass=function(){return l()?"k-mobile":null}}(exports.browserUtils||(exports.browserUtils={}));var R="eqjs";function M(t,e){var n={9:"[0-9]",a:"[a-z]"},o=e.split(""),i=function(e){if("focus"!==e.type||""===t.value){var i=[],r=t.selectionStart;o.forEach((function(e,o){if(n[e]){var r=new RegExp(n[e],"i").test(t.value.charAt(o));i.push(r?t.value.charAt(o):"_")}else i.push(e)})),t.value=i.join(""),t.selectionStart=t.selectionEnd=r}};t.addEventListener("keydown",(function(e){if(8===e.keyCode||46===e.keyCode){e.preventDefault();var i=[],r=t.selectionStart;if(0==r)return;for(var a=r,s=!0,l=o.length-1;l>=0;l--){var c=o[l];if(n[c]){var u=new RegExp(n[c],"i").test(t.value.charAt(l));u&&l!=r-1&&(s=!1),l===r-1&&a--,i.push(u&&l!=r-1?t.value.charAt(l):"_")}else l===a-1&&a--,r-1===l&&r--,i.push(c)}t.value=s?"":i.reverse().join(""),t.selectionStart=t.selectionEnd=a<0?0:a;var d=document.createEvent("Event");d.initEvent("input",!0,!0),t.dispatchEvent(d)}})),t.addEventListener("keypress",(function(e){var i=String.fromCharCode(e.charCode);if(i){e.preventDefault();var r=[],a=t.selectionStart,s=a;o.forEach((function(e,o){if(n[e]){var l=o!=a?t.value.charAt(o):i,c=new RegExp(n[e],"i").test(l);r.push(c?l:"_"),c&&a===o&&s++}else r.push(e),s===o&&s++,a===o&&a++})),t.value=r.join(""),t.selectionStart=t.selectionEnd=s;var l=document.createEvent("Event");l.initEvent("input",!0,!0),t.dispatchEvent(l)}})),t.addEventListener("input",i),t.addEventListener("focus",i)}var I=function(){function t(t,e){this.element="string"==typeof t?document.createElement(t):t,e&&this.element.parentElement!==e&&e.appendChild(this.element)}return t.prototype.addChild=function(t,e){var n=_(t,this.element);return e&&e(n),this},t.prototype.addChildElement=function(t){return t&&this.element.appendChild(t),this},t.prototype.attr=function(t,e){return this.element.setAttribute(t,e),this},t.prototype.id=function(t){return this.attr("id",t)},t.prototype.focus=function(){return this.element.focus(),this},t.prototype.title=function(t){return this.attr("title",t)},t.prototype.data=function(t,e){return void 0===e&&(e=null),null===e?(this.element.removeAttribute("data-"+t),this):this.attr("data-"+t,e)},t.prototype.show=function(){return this.removeStyle("display")},t.prototype.hide=function(t){return void 0===t&&(t=!0),t?this.setStyle("display","none"):this},t.prototype.visible=function(t){return void 0===t&&(t=!0),t?this.setStyle("visibility","visible"):this.setStyle("visibility","hidden")},t.prototype.isVisible=function(){return!!(this.element.offsetWidth||this.element.offsetHeight||this.element.getClientRects().length)},t.prototype.addClass=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(t)for(var o=a(a([],t.trim().split(" "),!0),e,!0),i=0;i<o.length;i++)this.element.classList.add(o[i]);return this},t.prototype.removeClass=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(t)for(var o=a(a([],t.trim().split(" "),!0),e,!0),i=0;i<o.length;i++)this.element.classList.remove(o[i]);return this},t.prototype.toggleClass=function(t,e){return void 0===e&&(e=void 0),t&&this.element.classList.toggle(t,e),this},t.prototype.on=function(t,e){for(var n=t.split(" "),o=0;o<n.length;o++)this.element.addEventListener(n[o],e);return this},t.prototype.off=function(t,e){for(var n=t.split(" "),o=0;o<n.length;o++)this.element.removeEventListener(n[o],e);return this},t.prototype.setStyle=function(t,e){return this.element.style.setProperty(t,e),this},t.prototype.removeStyle=function(t){return this.element.style.removeProperty(t),this},t.prototype.text=function(t){return this.element.innerText=t,this},t.prototype.html=function(t){return this.element.innerHTML=t,this},t.prototype.clear=function(){var t=this.element;this.element=document.createElement(this.element.tagName),t.replaceWith(this.element)},t.prototype.addText=function(t){var e=document.createTextNode(t);return this.element.appendChild(e),this},t.prototype.addHtml=function(t){return this.element.innerHTML+=t,this},t.prototype.toDOM=function(){return this.element},t.prototype.appendTo=function(t){return t&&t.appendChild(this.element),this},t}(),P=function(t){function n(e,n){return e?t.call(this,e,n)||this:t.call(this,"textarea",n)||this}return e(n,t),n.prototype.name=function(t){return this.element.name=t,this},n.prototype.rows=function(t){return this.element.rows=t,this},n.prototype.cols=function(t){return this.element.cols=t,this},n.prototype.value=function(t){return this.element.value=t,this},n}(I),O=function(t){function n(e,n){return e?t.call(this,e,n)||this:t.call(this,"input",n)||this}return e(n,t),n.prototype.name=function(t){return this.element.name=t,this},n.prototype.type=function(t){return this.element.type=t,this},n.prototype.size=function(t){return this.element.size=t,this},n.prototype.value=function(t){return t instanceof Date?this.element.valueAsDate=t:"number"==typeof t?this.element.valueAsNumber=t:this.element.value=t,this},n.prototype.mask=function(t){return M(this.element,t),this},n}(I),A=function(t){function n(e,n){return e?t.call(this,e,n)||this:t.call(this,"select",n)||this}return e(n,t),n.prototype.addOption=function(t){var e=document.createElement("option");return"string"==typeof t?(e.value=t,e.innerHTML=t):(e.value=t.value,e.innerHTML=t.title||t.value,e.selected=t.selected||!1),this.element.appendChild(e),this},n.prototype.value=function(t){return this.element.value=t,this},n}(I);function _(t,e){return"div"===t||t instanceof HTMLDivElement||"span"===t||t instanceof HTMLSpanElement||"a"===t||t instanceof HTMLAnchorElement||"button"===t||t instanceof HTMLButtonElement||"img"===t||t instanceof HTMLImageElement?new I(t,e):"input"===t||t instanceof HTMLInputElement?new O(t instanceof HTMLInputElement?t:null,e):"textarea"===t||t instanceof HTMLTextAreaElement?new P(t instanceof HTMLTextAreaElement?t:null,e):"select"===t||t instanceof HTMLSelectElement?new A(t instanceof HTMLSelectElement?t:null,e):new I(t,e)}var L,k="undefined"!=typeof TouchEvent;exports.DropEffect=void 0,(L=exports.DropEffect||(exports.DropEffect={})).None="none",L.Allow="allow",L.Forbid="forbid";var N,H=function(t,e,n){this.dropEffect=exports.DropEffect.Allow,this.pageX=0,this.pageY=0,this.item=t,this.dragImage=e,this.data=t.data,this.sourceEvent=n,n&&n instanceof MouseEvent&&(this.pageX=n.pageX,this.pageY=n.pageY),n&&k&&n instanceof TouchEvent&&n.touches[0]&&(this.pageX=n.touches[0].pageX,this.pageY=n.touches[0].pageY)},F=function(t){t&&t instanceof MouseEvent&&(this.x=t.pageX,this.y=t.pageY),t&&k&&t instanceof TouchEvent&&t.touches[0]&&(this.x=t.touches[0].pageX,this.y=t.touches[0].pageY)},B=function(){function t(){this.delta=5,this.draggableItem=null,this.dragImage=null,this.finishedSuccessfully=!1,this.mouseDownPosition=null,this.containerDescriptors=[],this.containerDescriptorIndex=-1,this.dropEffect=exports.DropEffect.None,this.classPrefix="eqjs-drop",this.DRAG_DISABLED_ATTR="drag-disabled"}return t.prototype.registerDraggableItem=function(t){var e=this,n=t.element;if(!n)throw Error("Element in draggle item is null or undefined");n.ondragstart=function(){return!1};var o=function(t){if(!n.hasAttribute(e.DRAG_DISABLED_ATTR)){t.preventDefault(),t instanceof MouseEvent&&t.stopPropagation();var o=new F(t);(Math.abs(o.x-e.mouseDownPosition.x)>e.delta||Math.abs(o.y-e.mouseDownPosition.y)>e.delta)&&r(t)}},i=function(t){e.mouseMoveDragListener(t)},r=function(r){r.preventDefault(),r.stopPropagation(),n.removeEventListener("mousemove",o),n.removeEventListener("touchmove",o),e.finishedSuccessfully=!1,t.beforeDragStart&&t.beforeDragStart(),e.dragImage=_("div").setStyle("position","absolute").setStyle("z-index","65530").toDOM(),document.body.appendChild(e.dragImage),e.dragImage.appendChild(n.cloneNode(!0)),t.renderer&&t.renderer(e.dragImage),e.dropEffect=exports.DropEffect.None,e.updateCusror(e.dropEffect),e.updateImageClass(e.dropEffect),e.draggableItem={element:n,scope:t.scope,data:t.data},e.updateDragItemPosition(r);var a=new H(e.draggableItem,e.dragImage,r);a.dropEffect=e.dropEffect,t.onDragStart&&t.onDragStart(a),e.dropEffect!==a.dropEffect&&(e.dropEffect=a.dropEffect,e.updateImageClass(e.dropEffect)),document.addEventListener("mousemove",i,!0),document.addEventListener("touchmove",i,!0)},a=function(t){k&&t instanceof TouchEvent&&t.preventDefault(),e.mouseDownPosition=new F(t),n.addEventListener("mousemove",o),n.addEventListener("touchmove",o),document.addEventListener("mouseup",s),document.addEventListener("touchend",s)};n.addEventListener("mousedown",a),n.addEventListener("touchstart",a);var s=function(t){e.mouseDownPosition=null,n.removeEventListener("mousemove",o),n.removeEventListener("touchmove",o),document.removeEventListener("mousemove",i,!0),document.removeEventListener("touchmove",i,!0),e.draggableItem&&l(t)},l=function(n){try{if(e.containerDescriptorIndex>=0){var o=e.containerDescriptors[e.containerDescriptorIndex],i={element:o.element,scopes:o.scopes,data:o.data},r=new H(e.draggableItem,e.dragImage,n);try{i.scopes.indexOf(e.draggableItem.scope)>=0&&e.dropEffect===exports.DropEffect.Allow&&(e.finishedSuccessfully=!0,o.onDrop&&o.onDrop(i,r))}finally{o.onDragLeave&&o.onDragLeave(i,r)}}}finally{try{var a=new H(e.draggableItem,e.dragImage,n);a.data.finishedSuccessfully=e.finishedSuccessfully,t.onDragEnd&&t.onDragEnd(a)}finally{e.draggableItem=null,e.dragImage&&e.dragImage.parentElement&&e.dragImage.parentElement.removeChild(e.dragImage),e.dragImage=null,e.finishedSuccessfully=!1,document.removeEventListener("mouseup",s),document.removeEventListener("touchend",s)}}}},t.prototype.registerDropContainer=function(t){if(!t.element)throw Error("Element in drop container is null or undefined");this.containerDescriptors.push(t)},t.prototype.removeDropContainer=function(t){var e=this.containerDescriptors.filter((function(e){return e===t||e.element==t}));if(e)for(var n=0,o=e;n<o.length;n++){var i=o[n];l.removeArrayItem(this.containerDescriptors,i)}},t.prototype.mouseMoveDragListener=function(t){if(t instanceof MouseEvent&&t.preventDefault(),t.stopPropagation(),this.updateDragItemPosition(t),-1==this.containerDescriptorIndex){for(var e=0;e<this.containerDescriptors.length;e++){var n=this.containerDescriptors[e];if(this.detectDragEnterEvent(n.element,t)){this.containerDescriptorIndex=e;break}}this.containerDescriptorIndex>=0&&this.dragEnterEvent(t)}else{n=this.containerDescriptors[this.containerDescriptorIndex];this.detectDragLeaveEvent(n.element,t)&&(this.dragLeaveEvent(t),this.containerDescriptorIndex=-1)}if(this.containerDescriptorIndex>=0){var o={element:(n=this.containerDescriptors[this.containerDescriptorIndex]).element,scopes:n.scopes,data:n.data};if(o.scopes.indexOf(this.draggableItem.scope)>=0){var i=new H(this.draggableItem,this.dragImage,t);i.dropEffect=this.dropEffect,n.onDragOver&&n.onDragOver(o,i)}}},t.prototype.updateCusror=function(t){switch(t){case exports.DropEffect.Allow:this.setCursorStyle(this.dragImage,"grabbing");break;case exports.DropEffect.Forbid:this.setCursorStyle(this.dragImage,"no-drop");break;default:this.setCursorStyle(this.dragImage,"grabbing")}},t.prototype.updateImageClass=function(t){switch(this.dragImage.classList.remove("".concat(this.classPrefix,"-allow")),this.dragImage.classList.remove("".concat(this.classPrefix,"-forbid")),this.dragImage.classList.remove("".concat(this.classPrefix,"-none")),t){case exports.DropEffect.Allow:this.dragImage.classList.add("".concat(this.classPrefix,"-allow"));break;case exports.DropEffect.None:this.dragImage.classList.add("".concat(this.classPrefix,"-none"));break;case exports.DropEffect.Forbid:this.dragImage.classList.add("".concat(this.classPrefix,"-forbid"));break;default:this.dragImage.classList.add("".concat(this.classPrefix,"-none"))}},t.prototype.setCursorStyle=function(t,e){if(t){t.style.cursor=e;for(var n=0;n<t.children.length;n++)this.setCursorStyle(t.children[n],e)}},t.prototype.updateDragItemPosition=function(t){if(this.dragImage){var e=new F(t);this.dragImage.style.top=e.y-this.dragImage.offsetHeight/2+"px",this.dragImage.style.left=e.x-this.dragImage.offsetWidth/2+"px"}},t.prototype.dragEnterEvent=function(t){var e=this.containerDescriptors[this.containerDescriptorIndex],n={element:e.element,scopes:e.scopes,data:e.data};if(n.scopes.indexOf(this.draggableItem.scope)>=0){var o=new H(this.draggableItem,this.dragImage,t);o.dropEffect=exports.DropEffect.Allow,e.onDragEnter&&e.onDragEnter(n,o),this.dropEffect=o.dropEffect,this.updateCusror(this.dropEffect),this.updateImageClass(this.dropEffect)}else this.dropEffect!==exports.DropEffect.Forbid&&(this.dropEffect=exports.DropEffect.None,this.updateCusror(this.dropEffect),this.updateImageClass(this.dropEffect))},t.prototype.dragLeaveEvent=function(t){var e=this.containerDescriptors[this.containerDescriptorIndex],n={element:e.element,scopes:e.scopes,data:e.data};if(n.scopes.indexOf(this.draggableItem.scope)>=0){var o=new H(this.draggableItem,this.dragImage,t);o.dropEffect=exports.DropEffect.None,e.onDragLeave&&e.onDragLeave(n,o),this.dropEffect=o.dropEffect,this.updateCusror(this.dropEffect),this.updateImageClass(this.dropEffect)}},t.prototype.detectDragEnterEvent=function(t,e){var n=b(t),o=new F(e);return!(o.y<n.y||o.y>n.y+t.offsetHeight)&&!(o.x<n.x||o.x>n.x+t.offsetWidth)},t.prototype.detectDragLeaveEvent=function(t,e){var n=b(t),o=new F(e);return!(o.y>n.y&&o.y<n.y+t.offsetHeight&&o.x>n.x&&o.x<n.x+t.offsetWidth)},t}(),Y=new B;exports.AutoResizeColumns=void 0,(N=exports.AutoResizeColumns||(exports.AutoResizeColumns={}))[N.Always=0]="Always",N[N.Once=1]="Once",N[N.Never=2]="Never";var G,U="keg",W=/{0:(.*?)}/g;exports.CellRendererType=void 0,(G=exports.CellRendererType||(exports.CellRendererType={}))[G.STRING=1]="STRING",G[G.NUMBER=2]="NUMBER",G[G.DATETIME=3]="DATETIME",G[G.BOOL=4]="BOOL";var z,j=function(t,e,n,o){var i=t?t.toString().replace(/\n/g,"↵ "):"";n.innerText=i,n.title=i,e.align==exports.GridColumnAlign.NONE&&n.classList.add("".concat(U,"-cell-value-align-left"))},q=function(t,e,n,o){var i=(t||"").toString();"number"==typeof t&&(i=e.dataColumn&&e.dataColumn.displayFormat&&W.test(e.dataColumn.displayFormat)?e.dataColumn.displayFormat.replace(W,(function(e,n){return s.numberToStr(t,n)})):t.toLocaleString()),n.innerText=i,n.title=i,e.align==exports.GridColumnAlign.NONE&&n.classList.add("".concat(U,"-cell-value-align-right"))},V=function(t,e,o,i){var r="[object Date]"===Object.prototype.toString.call(t),a=(t||"").toString();if(r)if(e.dataColumn&&e.dataColumn.displayFormat&&W.test(e.dataColumn.displayFormat))a=e.dataColumn.displayFormat.replace(W,(function(n,o){return s.dateTimeToStr(t,e.type,o)}));else{var l=s.getCurrentLocale(),c={hour:"numeric",minute:"numeric",second:"numeric"};switch(e.type){case n.Date:a=t.toLocaleDateString(l);break;case n.Time:a=t.toLocaleTimeString(l,c);break;case n.DateTime:a="".concat(t.toLocaleDateString(l)," ").concat(t.toLocaleTimeString(l,c))}}o.innerText=a,o.title=a,e.align==exports.GridColumnAlign.NONE&&o.classList.add("".concat(U,"-cell-value-align-right"))},J=function(t,e,n,o){if(e.dataColumn&&e.dataColumn.displayFormat&&W.test(e.dataColumn.displayFormat)){var i=e.dataColumn.displayFormat.replace(W,(function(e,n){return s.booleanToStr(t,n)}));return j(i,e,n)}n.classList.add("".concat(U,"-cell-value-bool")),n.classList.add("".concat(U,"-").concat(t?"cell-value-true":"cell-value-false"))},K=function(){function t(t){this.renderers={},this.defaultRenderers={},this.registerRenderer("StringDefault",j),this.setDefaultRenderer(exports.CellRendererType.STRING,j),this.registerRenderer("NumberDefault",q),this.setDefaultRenderer(exports.CellRendererType.NUMBER,q),this.registerRenderer("DateTimeDefault",V),this.setDefaultRenderer(exports.CellRendererType.DATETIME,V),this.registerRenderer("BoolDefault",J),this.setDefaultRenderer(exports.CellRendererType.BOOL,J)}return t.prototype.getDefaultRenderer=function(t){var e=this.getCellType(t);return this.defaultRenderers[exports.CellRendererType[e]]},t.prototype.getDefaultRendererByType=function(t){return this.defaultRenderers[exports.CellRendererType[t]]},t.prototype.setDefaultRenderer=function(t,e){e&&(this.defaultRenderers[exports.CellRendererType[t]]=e)},t.prototype.getRenderer=function(t){return this.renderers[t]},t.prototype.registerRenderer=function(t,e){this.renderers[t]=e},t.prototype.getCellType=function(t){switch(t){case n.Autoinc:case n.Byte:case n.Word:case n.Currency:case n.Float:case n.Int32:case n.Int64:return exports.CellRendererType.NUMBER;case n.Date:case n.DateTime:case n.Time:return exports.CellRendererType.DATETIME;case n.Bool:return exports.CellRendererType.BOOL;default:return exports.CellRendererType.STRING}},t}();exports.GridColumnAlign=void 0,(z=exports.GridColumnAlign||(exports.GridColumnAlign={}))[z.NONE=1]="NONE",z[z.LEFT=2]="LEFT",z[z.CENTER=3]="CENTER",z[z.RIGHT=4]="RIGHT";var Q,X=function(){function t(t,e,n){void 0===n&&(n=!1),this._label=null,this._description=null,this.align=exports.GridColumnAlign.NONE,this.isVisible=!0,this.isRowNum=!1,this.dataColumn=t,this.grid=e;var o=e.options.columnWidths||{};t?(t.style.alignment&&(this.align=function(t){switch(t){case f.Left:return exports.GridColumnAlign.LEFT;case f.Center:return exports.GridColumnAlign.CENTER;case f.Right:return exports.GridColumnAlign.RIGHT;default:return exports.GridColumnAlign.NONE}}(t.style.alignment)),this.width=o&&o[this.type]?o[this.type].default:250,this.cellRenderer=this.grid.cellRendererStore.getDefaultRenderer(t.type),this._description=t.description):n&&(this.isRowNum=!0,this.width=o&&o.rowNumColumn?o.rowNumColumn.default:60,this._label="",this.cellRenderer=this.grid.cellRendererStore.getDefaultRendererByType(exports.CellRendererType.NUMBER)),e&&e.options&&e.options.onGetCellRenderer&&(this.cellRenderer=e.options.onGetCellRenderer(this,this.cellRenderer)||this.cellRenderer)}return Object.defineProperty(t.prototype,"label",{get:function(){return this._label?this._label:this.isRowNum?"":this.dataColumn.label},set:function(t){this._label=this.label},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"description",{get:function(){return this._description},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this.dataColumn?this.dataColumn.type:null},enumerable:!1,configurable:!0}),t}(),Z=function(){function t(t,e){this.items=[],this.grid=e,this.sync(t)}return t.prototype.sync=function(t,e){void 0===e&&(e=!0),this.clear();var n=new X(null,this.grid,!0);if(this.add(n),e||(n.isVisible=!1),t)for(var o=0,i=t.getItems();o<i.length;o++){var r=i[o],a=new X(r,this.grid);this.grid.options.onSyncGridColumn&&this.grid.options.onSyncGridColumn(a),this.add(a)}},Object.defineProperty(t.prototype,"count",{get:function(){return this.items.length},enumerable:!1,configurable:!0}),t.prototype.add=function(t){var e=this.items.length;return this.items.push(t),e},t.prototype.put=function(t,e){t>=0&&t<this.items.length&&(this.items[t]=e)},t.prototype.move=function(t,e){var n=this.items.indexOf(t);n>=0&&n!=e&&l.moveArrayItem(this.items,n,e)},t.prototype.get=function(t){return t>=0&&t<this.items.length?this.items[t]:null},t.prototype.getItems=function(){return this.items},t.prototype.removeAt=function(t){this.get(t),this.items.splice(t,1)},t.prototype.clear=function(){this.items=[]},t}(),$=function(){function t(t){if(this.cssPrefix="keg",this.pagination={page:1,pageSize:30,total:0},this.paginationOptions={maxButtonCount:10,useBootstrap:!1},this.defaultDataGridOptions={slot:null,dataTable:null,fixHeightOnFirstRender:!1,syncGridColumns:!0,useRowNumeration:!0,allowDragDrop:!1,aggregates:{settings:null,calculator:null},paging:{enabled:!0,pageSize:30,pageSizeItems:[20,30,50,100,200]},columnWidths:{autoResize:exports.AutoResizeColumns.Always,stringColumns:{min:100,max:500,default:250},numberColumns:{min:60,default:120},boolColumns:{min:50,default:80},dateColumns:{min:80,default:200},otherColumns:{min:100,max:500,default:250},rowNumColumn:{min:40,default:60}},showPlusButton:!1,viewportRowsCount:null,showActiveRow:!0},this.rowsOnPagePromise=null,this.containerInitialHeight=0,this.firstRender=!0,this.prevRowTotals=null,this.landingIndex=-1,this.landingSlot=_("div").addClass("".concat(this.cssPrefix,"-col-landing-slot")).addChildElement(_("div").toDOM()).toDOM(),this._activeRowIndex=-1,t&&t.paging&&(t.paging=l.assign(this.defaultDataGridOptions.paging,t.paging)),this.options=this.mergeOptions(t),this.processColumnWidthsOptions(),!this.options.slot)throw Error('"slot" parameter is required to initialize EasyDataGrid');if(!this.options.dataTable)throw Error('"dataTable" parameter is required to initialize EasyDataGrid');this.dataTable=t.dataTable,this.eventEmitter=new x(this),this.cellRendererStore=new K(t),this.columns=new Z(this.dataTable.columns,this),this.setSlot(this.options.slot),this.init(this.options)}return t.prototype.mergeOptions=function(t){var e=l.assignDeep({},this.defaultDataGridOptions.columnWidths,t.columnWidths),n=l.assignDeep({},this.defaultDataGridOptions.paging,t.paging),o=l.assign({},this.defaultDataGridOptions,t);return o.columnWidths=e,o.paging=n,o},t.prototype.processColumnWidthsOptions=function(){var t=this.options.columnWidths;if(t){l.getStringDataTypes().forEach((function(e){t[e]=r(r({},t.stringColumns),t[e])})),l.getNumericDataTypes().forEach((function(e){t[e]=r(r({},t.numberColumns),t[e])})),t[n.Bool]=r(r({},t.boolColumns),t[n.Bool]),l.getDateDataTypes().forEach((function(e){t[e]=r(r({},t.dateColumns),t[e])}));var e=a(a(a(a([],l.getStringDataTypes(),!0),l.getNumericDataTypes(),!0),l.getDateDataTypes(),!0),[n.Bool],!1);l.getAllDataTypes().forEach((function(n){n in e||(t[n]=r(r({},t.otherColumns),t[n]))})),t[n.Unknown]=t.otherColumns}},t.prototype.setSlot=function(t){if("string"==typeof t){if(t.length)if("#"===t[0])this.slot=document.getElementById(t.substring(1));else{if("."!==t[0])throw Error("Unrecognized slot parameter (Must be id, class or HTMLElement): "+t);var e=document.getElementsByClassName(t.substring(1));e.length&&(this.slot=e[0])}}else this.slot=t},t.prototype.init=function(t){var e=this;t.onInit&&this.addEventListener("init",t.onInit),t.onRowClick&&this.addEventListener("rowClick",t.onRowClick),t.onRowDbClick&&this.addEventListener("rowDbClick",t.onRowDbClick),t.onPlusButtonClick&&this.addEventListener("plusButtonClick",t.onPlusButtonClick),t.onColumnChanged&&this.addEventListener("columnChanged",t.onColumnChanged),t.onColumnDeleted&&this.addEventListener("columnDeleted",t.onColumnDeleted),t.onColumnMoved&&this.addEventListener("columnMoved",t.onColumnMoved),t.onPageChanged&&this.addEventListener("pageChanged",t.onPageChanged),t.onActiveRowChanged&&this.addEventListener("activeRowChanged",t.onActiveRowChanged),this.addEventListener("pageChanged",(function(t){return e.activeRowIndex=-1})),l.assignDeep(this.paginationOptions,t.pagination),this.pagination.pageSize=this.options.paging.pageSize||this.pagination.pageSize,this.options.allowDragDrop&&Y.registerDropContainer({element:this.slot,scopes:["gridColumnMove"],onDragEnter:function(t,n){e.slot.classList.add("".concat(R,"-drophover")),e.showLandingSlot(n.pageX,n.pageY)},onDragOver:function(t,n){e.showLandingSlot(n.pageX,n.pageY)},onDragLeave:function(t,n){n.dropEffect=exports.DropEffect.Forbid,e.slot.classList.remove("".concat(R,"-drophover")),e.hideLandingSlot()},onDrop:function(t,n){e.dataTable.columns.move(n.data.column,e.landingIndex),e.refresh(),e.fireEvent({type:"columnMoved",columnId:n.data.column.id,newIndex:e.landingIndex})}}),this.refresh(),this.fireEvent("init")},t.prototype.fireEvent=function(t){"string"==typeof t?this.eventEmitter.fire(t):this.eventEmitter.fire(t.type,t)},t.prototype.setData=function(t){this.dataTable=t,this.clear(),this.refresh()},t.prototype.getData=function(){return this.dataTable},t.prototype.getColumns=function(){return this.columns},t.prototype.destroy=function(){this.slot.innerHTML=""},t.prototype.refresh=function(){this.clearDOM(),this.render()},t.prototype.clearDOM=function(){this.slot.innerHTML=""},t.prototype.clear=function(){this.pagination.page=1,this.clearDOM()},t.prototype.render=function(){var t=this;if(this.hasData()||this.options.showPlusButton){this.containerInitialHeight=this.slot.clientHeight,this.rootDiv=document.createElement("div"),this.rootDiv.style.width="100%",this.rootDiv.classList.add("".concat(this.cssPrefix,"-root")),this.columns.sync(this.dataTable.columns,this.options.useRowNumeration),this.renderHeader(),this.rootDiv.appendChild(this.headerDiv),this.renderBody(),this.rootDiv.appendChild(this.bodyDiv),this.renderFooter(),this.rootDiv.appendChild(this.footerDiv);var e=document.createElement("div");e.classList.add("".concat(this.cssPrefix,"-container")),e.appendChild(this.rootDiv),this.slot.appendChild(e);var n=this.options.columnWidths.autoResize!==exports.AutoResizeColumns.Never;this.rowsOnPagePromise?this.rowsOnPagePromise.then((function(){return t.updateHeight()})).then((function(){t.firstRender=!1,t.rowsOnPagePromise=null})):setTimeout((function(){t.updateHeight().then((function(){t.firstRender=!1,n&&t.resizeColumns()}))}),100)}},t.prototype.updateHeight=function(){var t=this;return new Promise((function(e){if(t.options.viewportRowsCount){var n=t.bodyCellContainerDiv.firstElementChild,o=(n?n.offsetHeight:36)*t.options.viewportRowsCount;return _(t.bodyViewportDiv).setStyle("height","".concat(o,"px")),void setTimeout((function(){var n=t.bodyViewportDiv.offsetHeight-t.bodyViewportDiv.clientHeight;o+=n,_(t.bodyViewportDiv).setStyle("height","".concat(o,"px")),e()}),100)}t.containerInitialHeight,e()})).then((function(){t.options.fixHeightOnFirstRender&&t.firstRender&&(t.slot.style.height="".concat(t.slot.offsetHeight,"px"))}))},t.prototype.getContainerWidth=function(){return this.columns.getItems().filter((function(t){return t.isVisible})).map((function(t){return t.width})).reduce((function(t,e){return t+e}))},t.prototype.renderHeader=function(){var t=this;this.headerDiv=_("div").addClass("".concat(this.cssPrefix,"-header")).toDOM(),this.headerViewportDiv=_("div",this.headerDiv).addClass("".concat(this.cssPrefix,"-header-viewport")).toDOM(),this.headerCellContainerDiv=_("div",this.headerViewportDiv).addClass("".concat(this.cssPrefix,"-header-cell-container")).toDOM(),this.headerRowDiv=_("div",this.headerCellContainerDiv).addClass("".concat(this.cssPrefix,"-header-row")).toDOM(),this.columns.getItems().forEach((function(e,n){if(e.isVisible){var o=t.renderColumnHeader(e,n);t.headerRowDiv.appendChild(o),e.isRowNum&&_(o).addChildElement(t.renderHeaderButtons())}}));var e=this.getContainerWidth();_(this.headerCellContainerDiv).setStyle("width","".concat(e,"px"))},t.prototype.hasData=function(){return this.dataTable.columns.count>0},t.prototype.renderColumnHeader=function(t,e){var n=this,o=_("div").addClass("".concat(this.cssPrefix,"-header-cell")).data("col-idx","".concat(e)).setStyle("width","".concat(t.width,"px"));t.dataColumn&&o.data("col-id","".concat(t.dataColumn.id));var i=o.toDOM();return _("div",i).addClass("".concat(this.cssPrefix,"-header-cell-resize")),t.isRowNum||_("div",i).addClass("".concat(this.cssPrefix,"-header-cell-label")).text(t.label),t.description&&_("div",i).addClass("question-mark").title(t.description),this.options.allowDragDrop&&Y.registerDraggableItem({element:i,scope:"gridColumnMove",data:{column:t},renderer:function(e){e.innerHTML="";var o=document.createElement("div");o.innerText=t.label,e.classList.add("".concat(n.cssPrefix,"-sortable-helper")),e.appendChild(o)},onDragStart:function(t){t.dropEffect=exports.DropEffect.Allow}}),i},t.prototype.renderBody=function(){var t=this;this.bodyDiv=_("div").addClass("".concat(this.cssPrefix,"-body")).toDOM(),this.bodyViewportDiv=_("div",this.bodyDiv).addClass("".concat(this.cssPrefix,"-body-viewport")).attr("tabIndex","0").toDOM(),this.bodyCellContainerDiv=_("div",this.bodyViewportDiv).addClass("".concat(this.cssPrefix,"-cell-container")).toDOM();var e=this.canShowAggregates();this.dataTable&&(this.showProgress(),this.rowsOnPagePromise=this.getRowsToRender().then((function(n){t.pagination.total=t.dataTable.getTotal(),t.hideProgress(),t.bodyCellContainerDiv.innerHTML="",t.prevRowTotals=null;var o=0;if(n.length){var i=e?t.options.aggregates.settings.getGroups():[];o=n.length<t.pagination.pageSize?n.length:t.pagination.pageSize,n.forEach((function(n,r){if(e&&t.updateTotalsState(i,n),r<o){var a=t.renderRow(n,r);t.bodyCellContainerDiv.appendChild(a)}}));var r=t.options.aggregates&&t.options.aggregates.showGrandTotalsOnEachPage;if(e&&(t.isLastPage()||r)){var a=new v(t.dataTable.columns,new Array(t.dataTable.columns.count));t.updateTotalsState(i,a,!0)}}if(t.options.columnWidths.autoResize!==exports.AutoResizeColumns.Never)t.resizeColumns();else{var s=t.getContainerWidth();_(t.bodyCellContainerDiv).setStyle("width","".concat(s,"px"))}return o})).catch((function(t){return console.error(t),0}))),this.bodyViewportDiv.addEventListener("scroll",(function(e){_(t.headerViewportDiv).setStyle("margin-left","-".concat(t.bodyViewportDiv.scrollLeft,"px"))})),this.bodyViewportDiv.addEventListener("keydown",this.onViewportKeydown.bind(this))},t.prototype.isLastPage=function(){return this.dataTable.elasticChunks?this.dataTable.totalIsKnown()&&this.pagination.page*this.pagination.pageSize>=this.pagination.total:this.pagination.page*this.pagination.pageSize>=this.pagination.total},t.prototype.canShowAggregates=function(){if(!this.options||!this.options.aggregates||!this.options.aggregates.settings)return!1;var t=this.options.aggregates.settings;return(t.hasAggregates()||t.hasRecordCount())&&(t.hasGroups()||t.hasGrandTotals())},t.prototype.updateTotalsState=function(t,e,n){void 0===n&&(n=!1);var o=this.options.aggregates.settings;if(this.prevRowTotals&&o.hasGroups()){for(var i=-1,r=1;r<=t.length;r++){for(var a=0,s=t[r-1].columns;a<s.length;a++){var l=s[a];if(!o.compareValues(this.prevRowTotals.getValue(l),e.getValue(l))){i=r;break}}if(-1!==i)break}if(-1!==i)for(r=t.length;r>=i;r--){var c=new v(this.dataTable.columns,this.prevRowTotals.toArray()),u=this.renderTotalsRow(r,c);this.bodyCellContainerDiv.appendChild(u)}}if(n&&o.hasGrandTotals()&&o.hasAggregates()){u=this.renderTotalsRow(0,e);this.bodyCellContainerDiv.appendChild(u)}this.prevRowTotals=e},t.prototype.applyGroupColumnTemplate=function(t,e,n){var o=t.replace(/{{\s*GroupValue\s*}}/g,e?"".concat(e):"-");return o=o.replace(/{{\s*GroupCount\s*}}/g,n?"".concat(n):"-")},t.prototype.renderTotalsRow=function(t,e){var n=this,o=this.options.aggregates.settings,i=t>0?o.getGroups()[t-1]:{columns:[],aggregates:o.getAggregates()},r=_("div").addClass("".concat(this.cssPrefix,"-row")).addClass("".concat(this.cssPrefix,"-row-totals")).addClass("".concat(this.cssPrefix,"-totals-lv").concat(t)).data("totals-level","".concat(t)).attr("tabindex","-1").toDOM();this.columns.getItems().forEach((function(t,o){if(t.isVisible){var a="",s=t.isRowNum?-1:n.dataTable.columns.getIndex(t.dataColumn.id);!t.isRowNum&&t.dataColumn&&i.columns.indexOf(t.dataColumn.id)>=0&&(a=e.getValue(s)),s==n.dataTable.columns.count-1&&(a=".  .  .  .  .  ."),r.appendChild(n.renderCell(t,o,a,r))}}));var a=this.options.aggregates.calculator.getAggrContainer(),s=o.getAggregates().map((function(t){return t.colId})),l=o.buildGroupKey(i,e);return a.getAggregateData(t,l).then((function(a){for(var l=0,c=s;l<c.length;l++){var u=c[l];e.setValue(u,a[u])}r.innerHTML="",n.columns.getItems().forEach((function(l,c){if(l.isVisible){var u="",d=l.isRowNum?-1:n.dataTable.columns.getIndex(l.dataColumn.id);if(!l.isRowNum){var h=!1;if(l.dataColumn){var p=i.columns.indexOf(l.dataColumn.id),f=s.indexOf(l.dataColumn.id);h=t>0?p==i.columns.length-1:0==d,(p>=0||f>=0)&&(u=e.getValue(d))}var g="";if(t>0&&!(g=l.dataColumn.groupFooterColumnTemplate)&&o.hasRecordCount()&&h&&(g="{{GroupValue}} ({{GroupCount}})"),g)u=n.renderCell(l,c,u,r).firstChild.innerHTML,u=n.applyGroupColumnTemplate(g,u,a[o.COUNT_FIELD_NAME])}var m=n.renderCell(l,c,u,r);r.appendChild(m)}}))})).catch((function(t){return console.error(t)})),r},t.prototype.onViewportKeydown=function(t){if(this.options.showActiveRow){var e=this.bodyCellContainerDiv.querySelectorAll(".".concat(this.cssPrefix,"-row")).length,n=void 0;switch(t.key){case"ArrowLeft":case"ArrowRight":break;case"ArrowUp":t.preventDefault(),n=this.activeRowIndex<0||this.activeRowIndex>=e?e-1:this.activeRowIndex-1,this.activeRowIndex=n>=0?n:0;break;case"ArrowDown":t.preventDefault(),n=this.activeRowIndex<0||this.activeRowIndex>=e?0:this.activeRowIndex+1,this.activeRowIndex=n<e?n:e-1}}},t.prototype.ensureRowVisibility=function(t){var e="number"==typeof t?this.getDataRow(t):t;if(e){var n=e.getBoundingClientRect(),o=this.bodyViewportDiv.getBoundingClientRect(),i=n.top-o.top,r=n.bottom-o.top,a=this.bodyViewportDiv.clientHeight,s=window.innerHeight||document.documentElement.clientHeight;if(i>0&&r<=a&&n.top>0&&n.bottom<s)return;i<0?this.bodyViewportDiv.scrollTop=this.bodyViewportDiv.scrollTop+i:r>a&&(this.bodyViewportDiv.scrollTop=this.bodyViewportDiv.scrollTop+r-a),(n=e.getBoundingClientRect()).top<0?document.documentElement.scrollTop=document.documentElement.scrollTop+n.top:n.bottom>s&&(document.documentElement.scrollTop=document.documentElement.scrollTop+n.bottom-s)}},t.prototype.getRowsToRender=function(){return!1===this.options.paging.enabled?Promise.resolve(this.dataTable.getCachedRows()):this.dataTable.getRows({offset:(this.pagination.page-1)*this.pagination.pageSize,limit:this.pagination.pageSize+1}).catch((function(t){return console.error(t),[]}))},t.prototype.renderFooter=function(){var t=this;this.footerDiv=_("div").addClass("".concat(this.cssPrefix,"-footer")).toDOM(),this.rowsOnPagePromise&&this.rowsOnPagePromise.then((function(e){t.footerDiv.innerHTML="",t.footerPaginateDiv=t.renderPageNavigator(),t.footerDiv.appendChild(t.footerPaginateDiv);var n=t.renderPageInfoBlock(e);t.footerDiv.appendChild(n)}))},t.prototype.renderPageInfoBlock=function(t){var e=_("div").addClass("".concat(this.cssPrefix,"-page-info")).toDOM();if(this.dataTable.getTotal()>0){var n=t?(this.pagination.page-1)*this.pagination.pageSize+1:0,o=t?n+t-1:0,i=this.dataTable.getTotal().toString();if(this.dataTable.elasticChunks)this.dataTable.getCachedCount()!==this.dataTable.getTotal()&&(i="?");e.innerHTML=s.getText("GridPageInfo").replace("{FirstPageRecordNum}","<span>".concat(n.toString(),"</span>")).replace("{LastPageRecordNum}","<span>".concat(o.toString(),"</span>")).replace("{Total}","<span>".concat(i,"</span>"))}return e},t.prototype.showProgress=function(){},t.prototype.hideProgress=function(){},t.prototype.getLocalIndexByGlobal=function(t){return this.pagination?t%this.pagination.pageSize:t},t.prototype.getGlobalIndexByLocal=function(t){return this.pagination?(this.pagination.page-1)*this.pagination.pageSize+t:t},t.prototype.renderRow=function(t,e){var n=this,o=this.getGlobalIndexByLocal(e),i=_("div").addClass("".concat(this.cssPrefix,"-row")).addClass("".concat(this.cssPrefix,"-row-").concat(e%2==1?"odd":"even")).data("row-idx","".concat(o)).attr("tabindex","-1").on("click",(function(o){n.activeRowIndex=e,n.fireEvent({type:"rowClick",row:t,rowIndex:e,sourceEvent:o})})).on("dblclick",(function(o){n.fireEvent({type:"rowDbClick",row:t,rowIndex:e,sourceEvent:o})}));0==e&&i.addClass("".concat(this.cssPrefix,"-row-first"));var r=i.toDOM();return this.options.showActiveRow&&e==this.activeRowIndex&&i.addClass("".concat(this.cssPrefix,"-row-active")),this.columns.getItems().forEach((function(e,i){if(e.isVisible){var a=e.isRowNum?-1:n.dataTable.columns.getIndex(e.dataColumn.id),s=e.isRowNum?o+1:t.getValue(a);r.appendChild(n.renderCell(e,i,s,r))}})),r},t.prototype.renderCell=function(t,e,n,o){var i=_("div").addClass("".concat(this.cssPrefix,"-cell")).data("col-idx","".concat(e)).attr("tabindex","-1").setStyle("width","".concat(t.width,"px"));t.align==exports.GridColumnAlign.LEFT?i.addClass("".concat(this.cssPrefix,"-cell-align-left")):t.align==exports.GridColumnAlign.RIGHT?i.addClass("".concat(this.cssPrefix,"-cell-align-right")):t.align==exports.GridColumnAlign.CENTER&&i.addClass("".concat(this.cssPrefix,"-cell-align-center"));var r=i.toDOM(),a=r.appendChild(_("div").addClass("".concat(this.cssPrefix,"-cell-value")).toDOM());return t.cellRenderer&&t.cellRenderer(n,t,a,o),r},t.prototype.setPage=function(t){this.pagination.page=t,this.fireEvent({type:"pageChanged",page:t}),this.refresh(),this.bodyViewportDiv.focus()},t.prototype.renderPageNavigator=function(){var t=this,e=document.createElement("div");e.className="".concat(this.cssPrefix,"-pagination-wrapper");var n=this.dataTable.getTotal();if(this.options.paging&&this.options.paging.enabled&&n>0){var o=this.paginationOptions.useBootstrap?"":"".concat(this.cssPrefix,"-"),i=function(e){var n=e.target;if(n.hasAttribute("data-page")){var o=parseInt(n.getAttribute("data-page"));t.setPage(o)}},r=function(e,n,r,a,s){var l=document.createElement("li");if(l.className="".concat(o,"page-item"),!a){s&&(l.className+=" active");var c=document.createElement("a");return c.setAttribute("href","javascript:void(0)"),c.innerHTML=n||e.toString(),c.setAttribute("data-page","".concat(e)),c.className="".concat(o,"page-link"),c.addEventListener("click",i),l.appendChild(c),l}var u=document.createElement("span");if(u.setAttribute("aria-hidden","true"),u.className="".concat(o,"page-link"),r)l.className+=" disabled";else{if(t.paginationOptions.useBootstrap)(u=document.createElement("a")).setAttribute("href","javascript:void(0)"),u.setAttribute("data-page","".concat(e));else{var d=document.createElement("a");d.setAttribute("href","javascript:void(0)"),d.setAttribute("data-page","".concat(e)),u=d}u.className="".concat(o,"page-link"),u.addEventListener("click",i)}return u.innerHTML=n,l.appendChild(u),l};if(this.dataTable.elasticChunks){var a=this.pagination.page||1;(c=document.createElement("ul")).className="".concat(o,"pagination");var l=r(a-1,"&laquo;",1==a,!0,!1);c.appendChild(l),l=r(a+1,"&raquo;",this.isLastPage(),!0,!1),c.appendChild(l),e.appendChild(c)}else if(this.pagination.total>this.pagination.pageSize){a=this.pagination.page||1;var c,u=Math.ceil(this.pagination.total/this.pagination.pageSize)||1,d=this.paginationOptions.maxButtonCount||10,h=a-1,p=h-h%d+1,f=p+d-1;f>u&&(f=u),(c=document.createElement("ul")).className="".concat(o,"pagination");l=r(p-1,"&laquo;",1==p,!0,!1);c.appendChild(l);for(var g=p;g<=f;g++)l=r(g,g.toString(),!1,!1,g==a),c.appendChild(l);l=r(f+1,"&raquo;",f==u,!0,!1),c.appendChild(l),e.appendChild(c)}if(this.options.paging.allowPageSizeChange){var m=document.createElement("div");m.className="".concat(this.cssPrefix,"-page-sizes");var y=document.createElement("div");y.className="kfrm-select ".concat(this.cssPrefix,"-page-sizes-select"),m.appendChild(y);var v=document.createElement("select"),D=this.options.paging.pageSizeItems||[],C=new Set(D);C.add(this.options.paging.pageSize||20),Array.from(C).forEach((function(t){var e=document.createElement("option");e.value=t.toString(),e.text=t.toString(),v.appendChild(e)})),v.value=(this.pagination.pageSize||20).toString(),y.appendChild(v),v.addEventListener("change",(function(e){var n=parseInt(e.target.value);t.pagination.pageSize=n,t.pagination.page=1,t.refresh()}));var x=document.createElement("div");x.className="".concat(this.cssPrefix,"-page-sizes-label"),m.appendChild(x);var w=document.createElement("span");w.innerText=s.getText("GridItemsPerPage"),x.appendChild(w),e.appendChild(m)}}return e},t.prototype.addEventListener=function(t,e){return this.eventEmitter.subscribe(t,(function(t){return e(t.data)}))},t.prototype.removeEventListener=function(t,e){this.eventEmitter.unsubscribe(t,e)},t.prototype.renderHeaderButtons=function(){var t=this;return this.options.showPlusButton?_("div").addClass("".concat(this.cssPrefix,"-header-btn-plus")).title(this.options.plusButtonTitle||"Add").addChild("a",(function(e){return e.attr("href","javascript:void(0)").on("click",(function(e){e.preventDefault(),t.fireEvent({type:"plusButtonClick",sourceEvent:e})}))})).toDOM():_("span").addText("#").toDOM()},t.prototype.showLandingSlot=function(t,e){for(var n=this.headerRowDiv.querySelectorAll("[class*=".concat(this.cssPrefix,"-table-col]")),o=[],i=1;i<n.length;i++){var r=n[i];"none"!==r.style.display&&o.push(r)}if(0===o.length)return this.landingIndex=0,void this.headerRowDiv.appendChild(this.landingSlot);var a=b(this.landingSlot);if(!(t>=a.x&&t<=a.x+this.landingSlot.offsetWidth)){for(var s=this.landingIndex,l=0,c=o;l<c.length;l++){var u=c[l],d=b(u),h=u.offsetWidth;t>d.x&&t<d.x+h&&(s=parseInt(u.getAttribute("data-col-idx"))-1)}s!=this.landingIndex&&(this.landingIndex=s,this.landingIndex<o.length?this.headerRowDiv.insertBefore(this.landingSlot,o[this.landingIndex]):this.headerRowDiv.appendChild(this.landingSlot))}},t.prototype.hideLandingSlot=function(){var t=this;this.landingIndex=-1,setTimeout((function(){t.landingSlot.parentElement&&t.landingSlot.parentElement.removeChild(t.landingSlot)}),10)},Object.defineProperty(t.prototype,"activeRowIndex",{get:function(){return this._activeRowIndex},set:function(t){if(t!==this._activeRowIndex){var e=this._activeRowIndex;this._activeRowIndex=t,this.updateActiveRow(),this.fireEvent({type:"activeRowChanged",oldValue:e,newValue:this.activeRowIndex,rowIndex:this.getGlobalIndexByLocal(this.activeRowIndex)})}},enumerable:!1,configurable:!0}),t.prototype.updateActiveRow=function(){var t=this;if(this.options.showActiveRow){this.bodyCellContainerDiv.querySelectorAll("[class*=".concat(this.cssPrefix,"-row-active]")).forEach((function(e){e.classList.remove("".concat(t.cssPrefix,"-row-active"))}));var e=this.getActiveRow();e&&(e.classList.add("".concat(this.cssPrefix,"-row-active")),this.ensureRowVisibility(this.activeRowIndex))}},t.prototype.getActiveRow=function(){return this.getDataRow(this.activeRowIndex)},t.prototype.getDataRow=function(t){var e=Array.from(this.bodyCellContainerDiv.querySelectorAll(".".concat(this.cssPrefix,"-row:not(.").concat(this.cssPrefix,"-row-totals)")));return t>=0&&t<e.length?e[t]:null},t.prototype.focus=function(){this.bodyViewportDiv.focus()},t.prototype.resizeColumns=function(){if(this.options.columnWidths.autoResize!==exports.AutoResizeColumns.Never){var t=this.bodyCellContainerDiv.style.width;this.bodyCellContainerDiv.style.visibility="hidden",this.bodyCellContainerDiv.style.width="1px",this.headerRowDiv.style.width="1px";for(var e=0,n=this.columns.getItems(),o=this.headerCellContainerDiv.querySelectorAll(".".concat(this.cssPrefix,"-header-cell")),i=0,r=function(t){var r=n[t];if(!r.isVisible)return"continue";var s=a.options.columnWidths.autoResize!==exports.AutoResizeColumns.Always&&r.dataColumn?r.dataColumn.calculatedWidth:0,c=a.bodyCellContainerDiv.querySelectorAll(".".concat(a.cssPrefix,'-cell[data-col-idx="').concat(t,'"] > .').concat(a.cssPrefix,"-cell-value")),u=0;if(s>0)e+=s,r.width=s,c.forEach((function(t){t.parentElement.style.width="".concat(s,"px")})),o[i].style.width="".concat(s,"px");else if(0==c.length&&(o[i].style.width=null,o[i].style.whiteSpace="nowrap"),u=o[i].offsetWidth,c.length>0){c.forEach((function(t){t.parentElement.style.width=null;var e=t.parentElement.offsetWidth;e>u&&(u=e)})),u+=3;var d=r.isRowNum?a.options.columnWidths.rowNumColumn.max||500:a.options.columnWidths[r.dataColumn.type].max||2e3,h=r.isRowNum?a.options.columnWidths.rowNumColumn.min||0:a.options.columnWidths[r.dataColumn.type].min||20;u>d&&(u=d),u<h&&(u=h),l.isNumericType(r.type)&&(u=Math.round(1.3*u)),e+=u,r.width=u,c.forEach((function(t){t.parentElement.style.width="".concat(u,"px")})),o[i].style.width="".concat(u,"px"),r.dataColumn&&(r.dataColumn.calculatedWidth=u)}else e+=u;i++},a=this,s=0;s<this.columns.count;s++)r(s);e>0?(this.bodyCellContainerDiv.style.width="".concat(e,"px"),this.headerCellContainerDiv.style.width="".concat(e,"px")):(this.bodyCellContainerDiv.style.width=t,this.headerCellContainerDiv.style.width=t),this.bodyCellContainerDiv.style.visibility=null,this.headerRowDiv.removeAttribute("style")}},t}(),tt=function(){function t(t,e){this.slot=t,this.options=e||{},this.options.yearRange||(this.options.yearRange="c-10:c+10")}return Object.defineProperty(t.prototype,"cssPrefix",{get:function(){return"kdtp-cal"},enumerable:!1,configurable:!0}),t.prototype.setDate=function(t){this.currentDate=new Date(t)},t.prototype.getDate=function(){return new Date(this.currentDate)},t.prototype.dateChanged=function(t){this.options.onDateChanged&&this.options.onDateChanged(this.currentDate,t)},t}(),et=function(){function t(t){this.calendar=null,this.timePicker=null,this.options=t,this.render()}return Object.defineProperty(t.prototype,"cssPrefix",{get:function(){return"kdtp"},enumerable:!1,configurable:!0}),t.prototype.setDateTime=function(t){this.currentDateTime=new Date(t),this.calendar&&this.calendar.setDate(this.currentDateTime),this.timePicker&&this.timePicker.setTime(this.currentDateTime)},t.prototype.getDateTime=function(){return new Date(this.currentDateTime)},t.prototype.render=function(){var t=this;this.options.showCalendar&&(this.calendar=this.createCalendar({yearRange:this.options.yearRange,showDateTimeInput:this.options.showDateTimeInput,timePickerIsUsed:this.options.showTimePicker,oneClickDateSelection:this.options.oneClickDateSelection,onDateChanged:function(e,n){t.currentDateTime=e,t.timePicker&&t.timePicker.setTime(t.currentDateTime),t.options.showTimePicker&&t.dateTimeChanged(),n&&t.apply(t.currentDateTime)}}),this.calendar&&this.calendar.render()),this.options.showTimePicker&&(this.timePicker=this.createTimePicker({onTimeChanged:function(e){t.currentDateTime.setHours(e.getHours()),t.currentDateTime.setMinutes(e.getMinutes()),t.calendar&&t.calendar.setDate(t.currentDateTime),t.dateTimeChanged()}}),this.timePicker&&this.timePicker.render()),this.setDateTime(new Date)},t.prototype.createCalendar=function(t){return null},t.prototype.createTimePicker=function(t){return null},t.prototype.show=function(t){this.options.beforeShow&&this.options.beforeShow();var e=b(t||document.body);this.slot.style.top=e.y+t.clientHeight+"px",this.slot.style.left=e.x+"px"},t.prototype.apply=function(t){this.options.onApply&&this.options.onApply(t),this.destroy()},t.prototype.cancel=function(){this.options.onCancel&&this.options.onCancel(),this.destroy()},t.prototype.destroy=function(){this.slot&&this.slot.parentElement&&this.slot.parentElement.removeChild(this.slot)},t.prototype.dateTimeChanged=function(){this.options.onDateTimeChanged&&this.options.onDateTimeChanged(this.currentDateTime)},t}(),nt=function(t){function n(e,n){var o=t.call(this,e,n)||this;o.daysOfWeek=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],o.months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],o.calendarBody=null,o.isManualInputChanging=!1;for(var i=0;i<o.daysOfWeek.length;i++)o.daysOfWeek[i]=s.getShortWeekDayName(i+1);for(i=0;i<o.months.length;i++)o.months[i]=s.getLongMonthName(i+1);return o}return e(n,t),n.prototype.setDate=function(e){t.prototype.setDate.call(this,e),this.selectedMonth=this.currentDate.getMonth(),this.selectedYear=this.currentDate.getFullYear(),this.rerenderMonth()},n.prototype.render=function(){var t=this,e=_("div",this.slot).addClass("".concat(this.cssPrefix,"-header"));this.options.showDateTimeInput?e.addChildElement(this.renderManualDateInput()):e.addChild("span",(function(e){return t.headerTextElem=e.toDOM()})),_(this.slot).addChildElement(this.renderCalendarButtons()),this.calendarBody=_("div",this.slot).addClass("".concat(this.cssPrefix,"-body")).toDOM()},n.prototype.getInputDateFormat=function(){var t=s.getLocaleSettings();return this.options.timePickerIsUsed?"".concat(t.editDateFormat," ").concat(t.editTimeFormat):t.editDateFormat},n.prototype.renderManualDateInput=function(){var t=this,e=this.getInputDateFormat(),n=_("input").attr("placeholder",e).addClass("".concat(this.cssPrefix,"-header-input"));return n.mask(e.replace("yyyy","9999").replace("MM","99").replace("dd","99").replace("HH","99").replace("mm","99").replace("ss","99")).on("input",(function(o){n.removeClass("error");try{t.isManualInputChanging=!0;var i=l.strToDateTime(t.manualInputElem.value,e);t.currentDate=i,t.jump(t.currentDate.getFullYear(),t.currentDate.getMonth()),t.dateChanged(!1)}catch(t){n.addClass("error")}finally{t.isManualInputChanging=!1}})).on("keydown",(function(e){13===e.keyCode&&(e.preventDefault(),e.stopPropagation(),t.manualInputElem.className.indexOf("error")<0&&!t.isManualInputChanging&&t.dateChanged(!0))})).on("focus",(function(){setTimeout((function(){t.manualInputElem.selectionStart=0,t.manualInputElem.selectionEnd=0}),50)})),this.manualInputElem=n.toDOM(),this.manualInputElem},n.prototype.updateDisplayedDateValue=function(){if(this.manualInputElem){if(!this.isManualInputChanging){var t=this.getInputDateFormat();this.manualInputElem.value=l.dateTimeToStr(this.currentDate,t),this.manualInputElem.focus()}}else if(this.headerTextElem){var e=s.getCurrentLocale();this.headerTextElem.innerText=this.currentDate.toLocaleString("en"==e?void 0:e,{year:"numeric",month:"long",day:"numeric"})}},n.prototype.renderCalendarButtons=function(){var t=this;return _("nav").addClass("".concat(this.cssPrefix,"-nav")).addChild("div",(function(e){return e.addClass("".concat(t.cssPrefix,"-nav-prev")).on("click",(function(){t.prev()})).addChild("span",(function(t){return t.html("&lsaquo;")}))})).addChild("div",(function(e){return e.addClass("".concat(t.cssPrefix,"-nav-selectors")).addChild("div",(function(e){return e.addClass("".concat(t.cssPrefix,"-nav-month")).addChild("select",(function(e){e.on("change",(function(){t.jump(t.selectedYear,parseInt(t.selectMonthElem.value))}));for(var n=function(n){e.addChild("option",(function(e){return e.attr("value",n.toString()).text(t.months[n])}))},o=0;o<t.months.length;o++)n(o);t.selectMonthElem=e.toDOM()}))})).addChild("div",(function(e){return e.addClass("".concat(t.cssPrefix,"-nav-year")).addChild("select",(function(e){return t.selectYearElem=e.on("change",(function(){t.jump(parseInt(t.selectYearElem.value),t.selectedMonth)})).toDOM()}))}))})).addChild("div",(function(e){return e.addClass("".concat(t.cssPrefix,"-nav-next")).on("click",(function(){t.next()})).addChild("span",(function(t){return t.html("&rsaquo;")}))})).toDOM()},n.prototype.prev=function(){this.selectedYear=0===this.selectedMonth?this.selectedYear-1:this.selectedYear,this.selectedMonth=0===this.selectedMonth?11:this.selectedMonth-1,this.rerenderMonth()},n.prototype.next=function(){this.selectedYear=11===this.selectedMonth?this.selectedYear+1:this.selectedYear,this.selectedMonth=(this.selectedMonth+1)%12,this.rerenderMonth()},n.prototype.rerenderSelectYear=function(){var t=/c-(\d*):c\+(\d*)/g.exec(this.options.yearRange),e=0,n=1;null!==t&&(e=parseInt(t[1]),n=parseInt(t[2])),this.selectYearElem.innerHTML="";for(var o=0;o<=e+n;o++){var i=document.createElement("option"),r=this.selectedYear-e+o;i.value=r.toString(),i.innerText=r.toString(),this.selectYearElem.appendChild(i)}},n.prototype.jump=function(t,e){this.selectedYear=t,this.selectedMonth=e,this.rerenderMonth()},n.prototype.rerenderMonth=function(){var t=this;this.updateDisplayedDateValue(),this.rerenderSelectYear();var e=new Date(this.selectedYear,this.selectedMonth).getDay(),n=new Date(this.selectedYear,this.selectedMonth+1,0).getDate();this.calendarBody.innerHTML="",this.selectYearElem.value=this.selectedYear.toString(),this.selectMonthElem.value=this.selectedMonth.toString(),this.daysOfWeek.forEach((function(e,n){_("div",t.calendarBody).addClass("".concat(t.cssPrefix,"-weekday")).addClass(0==n||6==n?"".concat(t.cssPrefix,"-weekend"):"").text(e)}));for(var o=0;o<e;o++)_("div",this.calendarBody).addClass("".concat(this.cssPrefix,"-day-empty"));for(var i=new Date,r=1;r<=n;r++){var a=_("div",this.calendarBody).addClass("".concat(this.cssPrefix,"-day")).attr("data-date",r.toString()).text(r.toString()).on("click",(function(e){t.currentDate.setFullYear(t.selectedYear),t.currentDate.setMonth(t.selectedMonth),t.currentDate.setDate(parseInt(e.target.getAttribute("data-date"))),t.dateChanged(t.options.oneClickDateSelection)}));r===i.getDate()&&this.selectedYear===i.getFullYear()&&this.selectedMonth===i.getMonth()&&a.addClass("".concat(this.cssPrefix,"-day-current")),r===this.currentDate.getDate()&&this.selectedYear===this.currentDate.getFullYear()&&this.selectedMonth===this.currentDate.getMonth()&&a.addClass("".concat(this.cssPrefix,"-day-selected"));var s=(e+r-1)%7;0!=s&&6!=s||a.addClass("".concat(this.cssPrefix,"-weekend")),"function"==typeof this.options.onDrawDay&&this.options.onDrawDay.apply(a.toDOM(),[a.toDOM(),new Date(this.selectedYear,this.selectedMonth,r)])}var l=(e+n)%7,c=0==l?0:7-l;for(o=0;o<c;o++)_("div",this.calendarBody).addClass("".concat(this.cssPrefix,"-day-empty"))},n.prototype.dateChanged=function(e){t.prototype.dateChanged.call(this,e),this.rerenderMonth()},n}(tt),ot=function(){function t(t,e){this.slot=t,this.options=e||{}}return Object.defineProperty(t.prototype,"cssPrefix",{get:function(){return"kdtp-tp"},enumerable:!1,configurable:!0}),t.prototype.setTime=function(t){this.currentTime=new Date(t)},t.prototype.getTime=function(){return new Date(this.currentTime)},t.prototype.timeChanged=function(){this.options.onTimeChanged&&this.options.onTimeChanged(this.currentTime)},t}(),it=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.setTime=function(e){t.prototype.setTime.call(this,e),this.updateDisplayedTime(),this.hoursInput.valueAsNumber=e.getHours(),this.minutesInput.valueAsNumber=e.getMinutes()},n.prototype.render=function(){var t=this;_("div",this.slot).addClass("".concat(this.cssPrefix,"-time")).addChild("span",(function(e){return t.timeText=e.toDOM()})).toDOM();var e=_("div",this.slot).addClass("".concat(this.cssPrefix,"-sliders"));return e.addChild("div",(function(e){return e.addClass("".concat(t.cssPrefix,"-time-row")).title("Hours").addChild("input",(function(e){return t.hoursInput=e.addClass("".concat(t.cssPrefix,"-input-hours")).type("range").attr("min","0").attr("max","23").attr("step","1").on("input",(function(e){t.currentTime.setHours(t.hoursInput.valueAsNumber),t.updateDisplayedTime(),t.timeChanged()})).toDOM()}))})),e.addChild("div",(function(e){return e.addClass("".concat(t.cssPrefix,"-time-row")).title("Minutes").addChild("input",(function(e){return t.minutesInput=e.addClass("".concat(t.cssPrefix,"-input-minutes")).type("range").attr("min","0").attr("max","59").attr("step","1").on("input",(function(e){t.currentTime.setMinutes(t.minutesInput.valueAsNumber),t.updateDisplayedTime(),t.timeChanged()})).toDOM()}))})),this.slot},n.prototype.updateDisplayedTime=function(){var t=s.getCurrentLocale(),e=this.currentTime.toLocaleString("en"==t?void 0:t,{hour:"numeric",minute:"numeric"});this.timeText.innerText=e},n}(ot),rt=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.render=function(){var e=this,n=_("div",document.body).addClass("".concat(this.cssPrefix)).attr("tabIndex","0").setStyle("position","absolute").setStyle("top","-1000px").setStyle("left","-1000px").on("keydown",(function(t){return 27===t.keyCode?e.cancel():13===t.keyCode&&e.apply(e.getDateTime()),!1}));this.options.zIndex&&n.setStyle("z-index","".concat(this.options.zIndex)),this.slot=n.toDOM(),t.prototype.render.call(this),this.renderButtons(),this.globalMouseDownHandler=function(t){var n=window.event||t;return n.srcElement||n.target,!e.slot.contains(n.target)&&(document.removeEventListener("mousedown",e.globalMouseDownHandler,!0),e.cancel()),!0}},n.prototype.renderButtons=function(){var t=this,e=_("div",this.slot).addClass("".concat(this.cssPrefix,"-buttons")).addChild("button",(function(e){return t.nowButton=e.addClass("".concat(t.cssPrefix,"-button ").concat(t.cssPrefix,"-button-now")).text(s.getText("ButtonNow")).on("click",(function(){return t.setDateTime(new Date),t.dateTimeChanged(),!1})).toDOM()}));!this.options.showTimePicker&&this.options.oneClickDateSelection||e.addChild("button",(function(e){return t.submitButton=e.addClass("".concat(t.cssPrefix,"-button ").concat(t.cssPrefix,"-button-apply")).text(s.getText("ButtonApply")).on("click",(function(){return t.apply(t.getDateTime()),!1})).toDOM()})),e.addChild("button",(function(e){return t.submitButton=e.addClass("".concat(t.cssPrefix,"-button ").concat(t.cssPrefix,"-button-cancel")).text(s.getText("ButtonCancel")).on("click",(function(){return t.cancel(),!1})).toDOM()}))},n.prototype.createCalendar=function(t){return this.calendarSlot=_("div",this.slot).addClass("".concat(this.cssPrefix,"-cal")).toDOM(),new nt(this.calendarSlot,t)},n.prototype.createTimePicker=function(t){return this.timePickerSlot=_("div",this.slot).addClass("".concat(this.cssPrefix,"-tp")).toDOM(),new it(this.timePickerSlot,t)},n.prototype.show=function(e){var n=this;if(this.options.showDateTimeInput){this.options.beforeShow&&this.options.beforeShow();var o=b(e||document.body),i=b(e?e.parentElement||e:document.body);this.slot.style.top=i.y+"px",this.slot.style.left=o.x+"px"}else t.prototype.show.call(this,e),this.slot.focus();setTimeout((function(){document.addEventListener("mousedown",n.globalMouseDownHandler,!0)}),1)},n}(et);exports.DialogFooterAlignment=void 0,(Q=exports.DialogFooterAlignment||(exports.DialogFooterAlignment={}))[Q.Left=1]="Left",Q[Q.Center=2]="Center",Q[Q.Right=3]="Right";var at,st,lt="kdlg",ct=function(){function t(){}return t.prototype.openConfirm=function(t,e,n){var o=this,i={title:t,closable:!1,submitable:!0,cancelable:!0,body:'<div id="'.concat(lt,'-dialog-confirm">').concat(e,"</div>")};return n?(i.onSubmit=function(){n(!0)},i.onCancel=function(){n(!1)},void this.open(i)):new Promise((function(t){i.onSubmit=function(){t(!0)},i.onCancel=function(){t(!1)},o.open(i)}))},t.prototype.openPrompt=function(t,e,n,o){var i=this,r={title:t,submitable:!0,closable:!0,cancelable:!0,submitOnEnter:!0,body:'<div id="'.concat(lt,'-dialog-form" class="kfrm-form">\n            <div class="kfrm-fields label-above">\n                <label for="').concat(lt,'-dialog-form-input" id="').concat(lt,'-dialog-form-content">').concat(e,'</label>\n                <input type="text" name="').concat(lt,'-dialog-form-input" id="').concat(lt,'-dialog-form-input" />\n            </div>\n        </div>'),arrangeParents:!1,beforeOpen:function(){var t=document.getElementById("".concat(lt,"-dialog-form-input"));n&&(t.value=n),t.focus()}},a=function(t){var e=document.getElementById("".concat(lt,"-dialog-form-input")),n=e.value;return n&&n.replace(/\s/g,"").length>0?(t(n),!0):(e.classList.add("eqjs-invalid"),!1)};return o?(r.onSubmit=function(){return a(o)},r.onCancel=function(){o("")},void this.open(r)):new Promise((function(t){r.onSubmit=function(){return a(t)},r.onCancel=function(){t("")},i.open(r)}))},t.prototype.open=function(t,e){var n=this,o=new ut(t,e),i=t.onDestroy;return t.onDestroy=function(t){n.untrack(t),i&&i(t)},o.open(),this.track(o),o},t.prototype.createSet=function(t){return new ht(t,this)},t.prototype.untrack=function(e){var n=t.openDialogs.indexOf(e);n>=0&&t.openDialogs.splice(n,1)},t.prototype.track=function(e){t.openDialogs.push(e)},t.prototype.openProgress=function(t){var e=this,n=new dt(t),o=t.onDestroy;return t.onDestroy=function(t){e.untrack(t),o&&o(t)},n.open(),this.track(n),n},t.prototype.getAllDialogs=function(){return Array.from(t.openDialogs)},t.prototype.closeAllDialogs=function(){for(var e=0,n=Array.from(t.openDialogs);e<n.length;e++){n[e].close()}},t.openDialogs=[],t}(),ut=function(){function t(t,e){var n=this;this.options=t,this.submitHandler=function(t){return(!n.options.onSubmit||!1!==n.options.onSubmit(n,t))&&(n.destroy(),!0)},this.cancelHandler=function(){n.options.onCancel&&n.options.onCancel(n),n.destroy()},this.keydownHandler=function(t){return 13!=t.keyCode||!n.isActiveDialog()||(t.preventDefault(),t.stopPropagation(),!n.submitHandler())||(window.removeEventListener("keydown",n.keydownHandler,!1),!1)},this.dialogId=l.generateId("dlg"),this.data=e,this.slot=_("div",document.body).attr("tab-index","-1").data("dialog-id",this.dialogId).addClass("".concat(lt,"-modal"),"is-active").focus().addChild("div",(function(t){return t.addClass("kdlg-modal-background")})).addChild("div",(function(o){return n.windowElement=o.addClass("".concat(lt,"-modal-window")).addChild("header",(function(e){n.headerElement=e.addClass("".concat(lt,"-header")).addChild("p",(function(e){return e.addClass("".concat(lt,"-header-title")).addText(t.title)})).toDOM(),!1!==t.closable&&e.addChild("button",(function(t){return t.addClass("".concat(lt,"-modal-close")).on("click",(function(){n.cancelHandler()})).focus()}))})).addChild("div",(function(t){t.addClass("".concat(lt,"-alert-container")),n.alertElement=t.toDOM()})).addChild("section",(function(o){if(n.bodyElement=o.addClass("".concat(lt,"-body")).toDOM(),"string"==typeof t.body){var i=D.renderLiquidTemplate(t.body,e);o.addHtml(i)}else o.addChildElement(t.body)})).addChild("footer",(function(e){var o=null;o=t.footerAlignment&&t.footerAlignment==exports.DialogFooterAlignment.Center?"align-center":"align-right",n.footerElement=e.addClass("".concat(lt,"-footer")).toDOM(),e.addClass(o),!1!==t.submitable&&(e.addChild("button",(function(e){e.id(n.dialogId+"-btn-submit").addClass("kfrm-button","is-info").addText(t.submitButtonText||s.getText("ButtonOK")),t.recaptchaSiteKey?(e.data("sitekey",t.recaptchaSiteKey),e.addClass("g-recaptcha"),e.on("click",(function(e){grecaptcha?grecaptcha.ready((function(){grecaptcha.execute(t.recaptchaSiteKey,{action:"submit"}).then((function(t){n.submitHandler(t)}))})):n.submitHandler()}))):e.on("click",(function(t){n.submitHandler()})),e.focus()})),!1!==t.cancelable&&e.addChild("button",(function(e){return e.id(n.dialogId+"-btn-cancel").addClass("kfrm-button").addText(t.cancelButtonText||s.getText("ButtonCancel")).on("click",(function(t){n.cancelHandler()}))})))})).toDOM()})).toDOM()}return t.prototype.getData=function(){return this.data},t.prototype.getRootElement=function(){return this.slot},t.prototype.getSubmitButtonElement=function(){return document.getElementById(this.dialogId+"-btn-submit")},t.prototype.getCancelButtonElement=function(){return document.getElementById(this.dialogId+"-btn-cancel")},t.prototype.open=function(){var t=this;this.options.beforeOpen&&this.options.beforeOpen(this),_(this.slot).show(),this.options.arrangeParents&&this.arrangeParents(!0);var e=this.slot.querySelector(".".concat(lt,"-modal-window"));this.options.height&&(e.style.height="string"==typeof this.options.height?this.options.height:"".concat(this.options.height,"px")),this.options.width&&(e.style.width="string"==typeof this.options.width?this.options.width:"".concat(this.options.width,"px")),this.options.submitOnEnter&&window.addEventListener("keydown",this.keydownHandler,!1),this.slot.querySelectorAll("input").forEach((function(e){return e.addEventListener("input",(function(){t.clearAlert(),t.options.onInput&&t.options.onInput(t)}))})),this.options.onShow&&this.options.onShow(this)},t.prototype.submit=function(){this.submitHandler()},t.prototype.cancel=function(){this.cancelHandler()},t.prototype.close=function(){this.destroy()},t.prototype.disableButtons=function(){this.slot.querySelectorAll("button").forEach((function(t){return t.disabled=!0}))},t.prototype.enableButtons=function(){this.slot.querySelectorAll("button").forEach((function(t){return t.disabled=!1}))},t.prototype.showAlert=function(t,e,n){var o=_("div").addClass("".concat(lt,"-alert ").concat(e||"")).addChild("span",(function(t){return t.addClass("".concat(lt,"-alert-closebtn")).text("×").on("click",(function(t){var e=t.target.parentElement;e.parentElement.removeChild(e)}))})).addText(t).toDOM();!0===n&&this.clearAlert(),this.alertElement.appendChild(o)},t.prototype.clearAlert=function(){this.alertElement.innerHTML=""},t.prototype.destroy=function(){document.querySelectorAll('[data-dialog-id="'.concat(this.dialogId,'"]')).length<=0||(this.options.arrangeParents&&this.arrangeParents(!1),document.body.removeChild(this.slot),this.options.submitOnEnter&&window.removeEventListener("keydown",this.keydownHandler,!1),this.options.onDestroy&&this.options.onDestroy(this))},t.prototype.isActiveDialog=function(){var t=document.documentElement.querySelectorAll(".kdlg-modal");return t[t.length-1]===this.slot},t.prototype.arrangeParents=function(t){for(var e=document.documentElement.querySelectorAll(".kdlg-modal-window"),n=0;n<e.length-1;n++)if(t){var o=0==n?20:40*n+20;_(e[n]).setStyle("margin-top","".concat(o,"px")).setStyle("margin-left","".concat(o,"px"))}else _(e[n]).removeStyle("margin-top").removeStyle("margin-left")},t}(),dt=function(t){function n(e,n){var o,i,r=this,a=_("div").addChild("div",(function(t){return o=t.text(e.content||"").toDOM()})).addChild("div",(function(t){t.addClass("".concat(lt,"-progress-line")).addChild("div",(function(t){i=t.addClass("fill").toDOM(),e.determinated?t.setStyle("width","0%"):t.addClass("indeterminate")}))})).toDOM();return(r=t.call(this,{title:e.title,body:a,beforeOpen:e.beforeOpen,onSubmit:e.onSubmit,width:e.width,height:e.height,submitable:!1,cancelable:!1,closable:!1,onDestroy:e.onDestroy},n)||this).contentElement=o,r.progressElement=i,r}return e(n,t),n.prototype.updateContent=function(t){this.contentElement.innerText=t},n.prototype.updateProgress=function(t){var e=this;t=this.in01(t),this.progressElement.style.width="".concat(100*t,"%"),1===t&&setTimeout((function(){e.submit()}),500)},n.prototype.in01=function(t){return t>1?1:t<0?0:t},n}(ut),ht=function(){function t(t,e){this.options=t,this.dialogService=e,this.currentDialog=null,this.currentIndex=0,this.options=t,this.dialogService=e}return t.prototype.getCurrent=function(){return this.currentDialog},t.prototype.openNext=function(t){return this.open(this.currentIndex+1,t)},t.prototype.openPrev=function(t){return this.open(this.currentIndex-1,t)},t.prototype.open=function(t,e){if(t<0?this.currentIndex=0:t>=this.options.length?this.currentIndex=this.options.length-1:this.currentIndex=t,this.currentDialog)try{this.currentDialog.close()}catch(t){}var n=this.options[this.currentIndex];return this.currentDialog=this.dialogService.open(n,e),this.currentDialog},t.prototype.close=function(){this.currentDialog&&(this.currentDialog.close(),this.currentDialog=null)},t}();s.updateDefaultTexts({GridPageInfo:"{FirstPageRecordNum} - {LastPageRecordNum} of {Total} records",GridItemsPerPage:"items per page",ButtonOK:"OK",ButtonCancel:"Cancel",ButtonApply:"Apply",ButtonNow:"Now",LblTotal:"Total"}),exports.PRE_SELECT=void 0,(at=exports.PRE_SELECT||(exports.PRE_SELECT={}))[at.THIS_WEEK=0]="THIS_WEEK",at[at.LAST_WEEK=1]="LAST_WEEK",at[at.THIS_MONTH=2]="THIS_MONTH",at[at.FIRST_MONTH=3]="FIRST_MONTH",at[at.LAST_MONTH=4]="LAST_MONTH",at[at.THIS_YEAR=5]="THIS_YEAR",at[at.QUARTER_1=6]="QUARTER_1",at[at.QUARTER_2=7]="QUARTER_2",at[at.QUARTER_3=8]="QUARTER_3",at[at.QUARTER_4=9]="QUARTER_4",exports.JUMP_TO=void 0,(st=exports.JUMP_TO||(exports.JUMP_TO={})).UNDEF="-1",st.TODAY="1",st.YESTERDAY="2",st.TOMORROW="3",st.WEEK_START="4",st.WEEK_END="5",st.MONTH_START="6",st.MONTH_END="7",st.YEAR_START="8",st.YEAR_END="9";var pt=function(t){function n(e){var n=t.call(this,{title:e.title||"Select a period",body:"",submitButtonText:e.submitButtonText||"OK",cancelButtonText:e.cancelButtonText||"Cancel",submitable:!0,closable:!0,cancelable:!0,beforeOpen:function(t){n.setupDialog()},onSubmit:function(t){"function"==typeof e.onSubmit&&e.onSubmit.apply(t,[n.result(n.from),n.result(n.to)])}})||this;return n.yearRange=e.yearRange,n.weekStart=e.weekStart||0,n.bodyElement.append(n.drawDialog()),n.calendar1.render(),n.calendar2.render(),n.from=n.alignDate(e.start?e.start:new Date),n.to=n.alignDate(e.finish&&n.alignDate(e.finish)>n.from?e.finish:new Date(n.from.getFullYear(),n.from.getMonth(),n.from.getDate()+1)),n.represent(),n}return e(n,t),n.prototype.alignDate=function(t){return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t},n.prototype.drawDialog=function(){var t=this;return _("div").addClass("tsp__container").addChild("div",(function(e){e.addClass("tsp__intervals").addChild("button",(function(e){return e.addClass("tsp__button").addText("This Week").on("click",(function(){t.select(exports.PRE_SELECT.THIS_WEEK)}))})).addChild("button",(function(e){return e.addClass("tsp__button").addText("Last Week").on("click",(function(){t.select(exports.PRE_SELECT.LAST_WEEK)}))})).addChild("button",(function(e){return e.addClass("tsp__button").addText("This Month").on("click",(function(){t.select(exports.PRE_SELECT.THIS_MONTH)}))})).addChild("button",(function(e){return e.addClass("tsp__button").addText("First Month").on("click",(function(){t.select(exports.PRE_SELECT.FIRST_MONTH)}))})).addChild("button",(function(e){return e.addClass("tsp__button").addText("Last Month").on("click",(function(){t.select(exports.PRE_SELECT.LAST_MONTH)}))})).addChild("button",(function(e){return e.addClass("tsp__button").addText("This Year").on("click",(function(){t.select(exports.PRE_SELECT.THIS_YEAR)}))})).addChild("button",(function(e){return e.addClass("tsp__button").addText("Quarter 1").on("click",(function(){t.select(exports.PRE_SELECT.QUARTER_1)}))})).addChild("button",(function(e){return e.addClass("tsp__button").addText("Quarter 2").on("click",(function(){t.select(exports.PRE_SELECT.QUARTER_2)}))})).addChild("button",(function(e){return e.addClass("tsp__button").addText("Quarter 3").on("click",(function(){t.select(exports.PRE_SELECT.QUARTER_3)}))})).addChild("button",(function(e){return e.addClass("tsp__button").addText("Quarter 4").on("click",(function(){t.select(exports.PRE_SELECT.QUARTER_4)}))}))})).addChild("div",(function(e){e.addClass("tsp__form").addChild("div",(function(e){e.addClass("tsp__date").addChild("div",(function(e){e.addClass("tsp__label").addChild("label",(function(t){t.addText("Start")})).addChild("select",(function(e){e.addOption({value:exports.JUMP_TO.UNDEF,title:"Jump To"}).addOption({value:exports.JUMP_TO.TODAY,title:"Today"}).addOption({value:exports.JUMP_TO.YESTERDAY,title:"Yesterday"}).addOption({value:exports.JUMP_TO.TOMORROW,title:"Tomorrow"}).addOption({value:exports.JUMP_TO.WEEK_START,title:"Week Start"}).addOption({value:exports.JUMP_TO.WEEK_END,title:"Week End"}).addOption({value:exports.JUMP_TO.MONTH_START,title:"Month Start"}).addOption({value:exports.JUMP_TO.MONTH_END,title:"Month End"}).addOption({value:exports.JUMP_TO.YEAR_START,title:"Year Start"}).addOption({value:exports.JUMP_TO.YEAR_END,title:"Year End"}),e.on("change",(function(e){t.jump(1,e.target.value,e.target)}))}))})).addChild("div",(function(e){e.addClass("tsp__calendar"),t.calendar1=new nt(e.toDOM(),{yearRange:t.yearRange,showDateTimeInput:!0,onDateChanged:function(e){t.from=t.alignDate(e),t.calendar1.setDate(t.from),t.to<t.from&&(t.to=t.from),t.represent()},onDrawDay:function(e,n){t.alignDate(n)>=t.from&&t.alignDate(n)<=t.to?e.classList.add("day-in-range"):e.classList.remove("day-in-range")}})}))})).addChild("div",(function(e){e.addClass("tsp__date").addChild("div",(function(e){e.addClass("tsp__label").addChild("label",(function(t){t.addText("Finish")})).addChild("select",(function(e){e.addOption({value:exports.JUMP_TO.UNDEF,title:"Jump To"}).addOption({value:exports.JUMP_TO.TODAY,title:"Today"}).addOption({value:exports.JUMP_TO.YESTERDAY,title:"Yesterday"}).addOption({value:exports.JUMP_TO.TOMORROW,title:"Tomorrow"}).addOption({value:exports.JUMP_TO.WEEK_START,title:"Week Start"}).addOption({value:exports.JUMP_TO.WEEK_END,title:"Week End"}).addOption({value:exports.JUMP_TO.MONTH_START,title:"Month Start"}).addOption({value:exports.JUMP_TO.MONTH_END,title:"Month End"}).addOption({value:exports.JUMP_TO.YEAR_START,title:"Year Start"}).addOption({value:exports.JUMP_TO.YEAR_END,title:"Year End"}),e.on("change",(function(e){t.jump(2,e.target.value,e.target)}))}))})).addChild("div",(function(e){e.addClass("tsp__calendar"),t.calendar2=new nt(e.toDOM(),{yearRange:t.yearRange,showDateTimeInput:!0,onDateChanged:function(e){t.alignDate(e)>=t.from?t.to=t.alignDate(e):t.calendar2.setDate(t.to),t.represent()},onDrawDay:function(e,n){t.alignDate(n)>=t.from&&t.alignDate(n)<=t.to?e.classList.add("day-in-range"):e.classList.remove("day-in-range")}})}))}))})).toDOM()},n.prototype.setupDialog=function(){},n.prototype.jump=function(t,e,n){var o,i=1===t?"from":"to",r=new Date;switch(e){case exports.JUMP_TO.TODAY:o=r;break;case exports.JUMP_TO.YESTERDAY:o=new Date(r.getFullYear(),r.getMonth(),r.getDate()-1);break;case exports.JUMP_TO.TOMORROW:o=new Date(r.getFullYear(),r.getMonth(),r.getDate()+1);break;case exports.JUMP_TO.WEEK_START:o=new Date(r.setDate(r.getDate()-r.getDay()+this.weekStart));break;case exports.JUMP_TO.WEEK_END:o=new Date(r.setDate(r.getDate()-r.getDay()+6+this.weekStart));break;case exports.JUMP_TO.MONTH_START:o=new Date(r.getFullYear(),r.getMonth(),1);break;case exports.JUMP_TO.MONTH_END:o=new Date(r.getFullYear(),r.getMonth()+1,0);break;case exports.JUMP_TO.YEAR_START:o=new Date(r.getFullYear(),0,1);break;case exports.JUMP_TO.YEAR_END:o=new Date(r.getFullYear(),12,0)}o=this.alignDate(o),n.value=exports.JUMP_TO.UNDEF,"from"===i?(this.from=o,this.to<this.from&&(this.to=this.from)):o>=this.from&&(this[i]=o),this.represent()},n.prototype.represent=function(){this.calendar1.setDate(this.from),this.calendar2.setDate(this.to)},n.prototype.select=function(t){switch(t){case exports.PRE_SELECT.THIS_WEEK:var e=new Date;this.from=new Date(e.getFullYear(),e.getMonth(),e.getDate()-e.getDay()),this.to=new Date(this.from.getFullYear(),this.from.getMonth(),this.from.getDate()+6);break;case exports.PRE_SELECT.LAST_WEEK:e=new Date;this.from=new Date(e.getFullYear(),e.getMonth(),e.getDate()-e.getDay()-7),this.to=new Date(this.from.getFullYear(),this.from.getMonth(),this.from.getDate()+6);break;case exports.PRE_SELECT.THIS_MONTH:e=new Date;this.from=new Date(e.getFullYear(),e.getMonth(),1),this.to=new Date(e.getFullYear(),e.getMonth()+1,0);break;case exports.PRE_SELECT.FIRST_MONTH:e=new Date;this.from=new Date(e.getFullYear(),0,1),this.to=new Date(e.getFullYear(),1,0);break;case exports.PRE_SELECT.LAST_MONTH:e=new Date;this.from=new Date(e.getFullYear(),e.getMonth()-1,1),this.to=new Date(e.getFullYear(),e.getMonth(),0);break;case exports.PRE_SELECT.THIS_YEAR:e=new Date;this.from=new Date(e.getFullYear(),0,1),this.to=new Date(e.getFullYear(),12,0);break;case exports.PRE_SELECT.QUARTER_1:e=new Date;this.from=new Date(e.getFullYear(),0,1),this.to=new Date(e.getFullYear(),3,0);break;case exports.PRE_SELECT.QUARTER_2:e=new Date;this.from=new Date(e.getFullYear(),3,1),this.to=new Date(e.getFullYear(),6,0);break;case exports.PRE_SELECT.QUARTER_3:e=new Date;this.from=new Date(e.getFullYear(),6,1),this.to=new Date(e.getFullYear(),9,0);break;case exports.PRE_SELECT.QUARTER_4:e=new Date;this.from=new Date(e.getFullYear(),9,1),this.to=new Date(e.getFullYear(),12,0)}this.represent()},n.prototype.result=function(t){var e=this.alignDate(new Date),n={Today:this.alignDate(new Date),Yesterday:this.alignDate(new Date(e.getFullYear(),e.getMonth(),e.getDate()-1)),Tomorrow:this.alignDate(new Date(e.getFullYear(),e.getMonth(),e.getDate()+1)),FirstDayOfMonth:this.alignDate(new Date(e.getFullYear(),e.getMonth(),1)),LastDayOfMonth:this.alignDate(new Date(e.getFullYear(),e.getMonth()+1,0)),FirstDayOfWeek:this.alignDate(new Date(e.setDate(e.getDate()-e.getDay()+this.weekStart))),FirstDayOfYear:this.alignDate(new Date(e.getFullYear(),0,1)),FirstDayOfNextWeek:this.alignDate(new Date(e.setDate(e.getDate()-e.getDay()+this.weekStart+7))),FirstDayOfNextMonth:this.alignDate(new Date(e.getFullYear(),e.getMonth()+1,1)),FirstDayOfNextYear:this.alignDate(new Date(e.getFullYear()+1,0,1))};for(var o in n)if(console.log(n[o],t),n[o].getTime()===t.getTime())return"${{".concat(o,"}}");return l.dateTimeToStr(t,s.getLocaleSettings().editDateFormat)},n}(ut),ft=new ct;exports.Calendar=tt,exports.DFMT_REGEX=W,exports.DateTimePicker=et,exports.DefaultCalendar=nt,exports.DefaultDateTimePicker=rt,exports.DefaultDialog=ut,exports.DefaultDialogService=ct,exports.DefaultDialogSet=ht,exports.DefaultProgressDialog=dt,exports.DefaultTimePicker=it,exports.DomElementBuilder=I,exports.DomInputElementBuilder=O,exports.DomSelectElementBuilder=A,exports.DomTextAreaElementBuilder=P,exports.DragManager=B,exports.EasyGrid=$,exports.EqDragEvent=H,exports.GridCellRendererStore=K,exports.GridColumn=X,exports.GridColumnList=Z,exports.TimePicker=ot,exports.TimeSpanPicker=pt,exports.addCssClass=function(t,e){t.className=t.className?t.className+" "+e:e},exports.addElement=function(t,e,n){var o=document.createElement(e),i=n||{};return i.cssClass&&(o.className=i.cssClass),t.appendChild(o),o},exports.createBrowserEvent=function(t){var e;return"function"==typeof Event?e=new Event(t):(e=document.createEvent("Event")).initEvent(t,!0,!0),e},exports.dialogs=ft,exports.domel=_,exports.eqCssMobile="eqjs-mobile",exports.eqCssPrefix=R,exports.eqDragManager=Y,exports.getDocSize=function(){return exports.browserUtils.IsIE()?S():{width:Math.max(document.documentElement.clientWidth,document.body.clientWidth||0),height:Math.max(document.documentElement.clientHeight,document.body.clientHeight||0)}},exports.getElementAbsolutePos=b,exports.getScrollPos=E,exports.getViewportSize=function(){return{width:Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),height:Math.max(document.documentElement.clientHeight||0,window.innerHeight||0)}},exports.getWinSize=S,exports.hideElement=w,exports.isVisible=function(t){return"none"!=t.style.display&&0!=t.offsetWidth&&0!=t.offsetHeight},exports.mask=M,exports.showElement=T,exports.showTimeSpanPicker=function(t){return new pt(t).open()},exports.slideDown=function(t,e,n){t.style.removeProperty("display");var o=window.getComputedStyle(t).display;"none"===o&&(o="block"),t.style.display=o;var i=t.offsetHeight;t.style.overflow="hidden",t.style.height="0px",t.style.paddingTop="0px",t.style.paddingBottom="0px",t.style.marginTop="0px",t.style.marginBottom="0px",t.offsetHeight,t.style.boxSizing="border-box",t.style.transitionProperty="height, margin, padding",t.style.transitionDuration=e+"ms",t.style.height=i+"px",t.style.removeProperty("padding-top"),t.style.removeProperty("padding-bottom"),t.style.removeProperty("margin-top"),t.style.removeProperty("margin-bottom"),window.setTimeout((function(){t.style.removeProperty("height"),t.style.removeProperty("overflow"),t.style.removeProperty("transition-duration"),t.style.removeProperty("transition-property"),t.style.removeProperty("box-sizing"),n&&n()}),e)},exports.slideUp=function(t,e,n){t.style.transitionProperty="height, margin, padding",t.style.transitionDuration=e+"ms",t.style.boxSizing="border-box",t.style.height=t.offsetHeight+"px",t.offsetHeight,t.style.overflow="hidden",t.style.height="0px",t.style.paddingTop="0px",t.style.paddingBottom="0px",t.style.marginTop="0px",t.style.marginBottom="0px",window.setTimeout((function(){t.style.display="none",t.style.removeProperty("height"),t.style.removeProperty("padding-top"),t.style.removeProperty("padding-bottom"),t.style.removeProperty("margin-top"),t.style.removeProperty("margin-bottom"),t.style.removeProperty("overflow"),t.style.removeProperty("transition-duration"),t.style.removeProperty("transition-property"),t.style.removeProperty("box-sizing"),n&&n()}),e)},exports.toggleVisibility=function(t,e,n){n||(n={}),n.display||(n.display=""),n.duration||(n.duration=200),w(t),T(e,n.display),n.complete&&n.complete()},exports.wrapInner=function(t,e){for(t.appendChild(e);t.firstChild!==e;)e.appendChild(t.firstChild)};
//# sourceMappingURL=easydata.ui.cjs.js.map
